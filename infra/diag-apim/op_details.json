{
  "resourceGroup": "rg-portalpay-prod",
  "serviceName": "apim-portalpay-prod",
  "subscriptionId": "0a8c8695-c09e-45cc-8a64-697faedee923",
  "products": {
    "portalpay-starter": {
      "apis": [
        {
          "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/products/portalpay-starter/apis/portalpay-api",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "portalpay-api",
          "properties": {
            "displayName": "PortalPay API",
            "apiRevision": "1",
            "description": "Public API surface for PortalPay under a hardened posture: Azure Front Door Premium (AFD) gateway \u00e2\u2020\u2019 Azure API Management (APIM).\nAll developer-facing endpoints require an APIM subscription key header `Ocp-Apim-Subscription-Key` and must traverse AFD.\nOrigin enforcement: AFD injects an internal header `x-edge-secret`; APIM inbound policy validates it and may reject direct-origin requests with 403.\nWallet identity is resolved at the gateway and injected to the backend via `x-resolved-wallet`; client-supplied `x-wallet` header and `wallet` parameters are ignored.\nHealth endpoint: `GET /healthz` returns 200 JSON for probes; does not require a subscription.\nNote: Some endpoints are read-only or environment-gated in production. Admin/sensitive routes (JWT-only) are not part of this spec.\n",
            "specificationLastUpdated": "2025-10-30T19:12:55.2966667Z",
            "subscriptionRequired": true,
            "serviceUrl": "https://payportal.azurewebsites.net",
            "backendId": null,
            "path": "portalpay",
            "protocols": [
              "https"
            ],
            "mcpProperties": null,
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          }
        }
      ],
      "operations": {
        "portalpay-api": [
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/upsertSplitConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "upsertSplitConfig",
            "properties": {
              "displayName": "Configure split (admin-only JWT; APIM writes not permitted)",
              "method": "POST",
              "urlTemplate": "/api/split/deploy",
              "templateParameters": [],
              "description": "Idempotently persists split address and recipients for a merchant. Admin-only via JWT and CSRF. APIM developer subscriptions cannot perform this write.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "splitAddress": "string",
                          "recipients": [
                            {
                              "address": "string",
                              "sharesBps": 0
                            }
                          ]
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "SplitConfigUpsertRequest",
                    "generatedSample": "{\r\n  \"splitAddress\": \"string\",\r\n  \"recipients\": [\r\n    {\r\n      \"address\": \"string\",\r\n      \"sharesBps\": 0\r\n    }\r\n  ]\r\n}",
                    "sample": "{\r\n  \"splitAddress\": \"string\",\r\n  \"recipients\": [\r\n    {\r\n      \"address\": \"string\",\r\n      \"sharesBps\": 0\r\n    }\r\n  ]\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Split configuration result",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "split": {
                              "address": "string",
                              "recipients": [
                                {
                                  "address": "string",
                                  "sharesBps": 0
                                }
                              ]
                            },
                            "idempotent": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "SplitConfigUpsertResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  },\r\n  \"idempotent\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  },\r\n  \"idempotent\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/createReceipt",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "createReceipt",
            "properties": {
              "displayName": "Create a receipt payload for a QR-code payment portal",
              "method": "POST",
              "urlTemplate": "/api/receipts",
              "templateParameters": [],
              "description": "Create an itemized receipt used by the payment portal. The portal URL can be QR-encoded and printed on POS receipts. Requires APIM subscription and `receipts:write` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "id": "rcpt_12345",
                          "lineItems": [
                            {
                              "label": "Sample Item",
                              "priceUsd": 25.0
                            },
                            {
                              "label": "Tax",
                              "priceUsd": 2.0
                            }
                          ],
                          "totalUsd": 27.0
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "CreateReceiptRequest",
                    "generatedSample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"totalUsd\": 27.0\r\n}",
                    "sample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"totalUsd\": 27.0\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 201,
                  "description": "Receipt created",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "id": "rcpt_12345",
                            "paymentUrl": "https://pay.ledger1.ai/pay/rcpt_12345",
                            "status": "pending"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "CreateReceiptResponse",
                      "generatedSample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"paymentUrl\": \"https://pay.ledger1.ai/pay/rcpt_12345\",\r\n  \"status\": \"pending\"\r\n}",
                      "sample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"paymentUrl\": \"https://pay.ledger1.ai/pay/rcpt_12345\",\r\n  \"status\": \"pending\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "Invalid request",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "Server error",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/upsertInventory",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "upsertInventory",
            "properties": {
              "displayName": "Create or update an inventory item",
              "method": "POST",
              "urlTemplate": "/api/inventory",
              "templateParameters": [],
              "description": "Upsert (create/update) an inventory item. Requires APIM subscription and `inventory:write` scope. Ownership/admin is enforced for JWT callers; APIM callers are bound to their subscription wallet.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "id": "string",
                          "sku": "string",
                          "name": "string",
                          "priceUsd": 0.0,
                          "stockQty": 0,
                          "currency": "string",
                          "category": "string",
                          "description": "string",
                          "tags": [
                            "string"
                          ],
                          "images": [
                            "string"
                          ],
                          "attributes": {},
                          "costUsd": 0.0,
                          "taxable": true,
                          "jurisdictionCode": "string",
                          "industryPack": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "InventoryUpsertRequest",
                    "generatedSample": "{\r\n  \"id\": \"string\",\r\n  \"sku\": \"string\",\r\n  \"name\": \"string\",\r\n  \"priceUsd\": 0.0,\r\n  \"stockQty\": 0,\r\n  \"currency\": \"string\",\r\n  \"category\": \"string\",\r\n  \"description\": \"string\",\r\n  \"tags\": [\r\n    \"string\"\r\n  ],\r\n  \"images\": [\r\n    \"string\"\r\n  ],\r\n  \"attributes\": {},\r\n  \"costUsd\": 0.0,\r\n  \"taxable\": true,\r\n  \"jurisdictionCode\": \"string\",\r\n  \"industryPack\": \"string\"\r\n}",
                    "sample": "{\r\n  \"id\": \"string\",\r\n  \"sku\": \"string\",\r\n  \"name\": \"string\",\r\n  \"priceUsd\": 0.0,\r\n  \"stockQty\": 0,\r\n  \"currency\": \"string\",\r\n  \"category\": \"string\",\r\n  \"description\": \"string\",\r\n  \"tags\": [\r\n    \"string\"\r\n  ],\r\n  \"images\": [\r\n    \"string\"\r\n  ],\r\n  \"attributes\": {},\r\n  \"costUsd\": 0.0,\r\n  \"taxable\": true,\r\n  \"jurisdictionCode\": \"string\",\r\n  \"industryPack\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Upserted item",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "item": {
                              "id": "string",
                              "wallet": "string",
                              "sku": "string",
                              "name": "string",
                              "priceUsd": 0.0,
                              "currency": "string",
                              "stockQty": 0,
                              "category": "string",
                              "description": "string",
                              "tags": [
                                "string"
                              ],
                              "images": [
                                "string"
                              ],
                              "attributes": {},
                              "costUsd": 0.0,
                              "taxable": true,
                              "jurisdictionCode": "string",
                              "industryPack": "string",
                              "createdAt": 0,
                              "updatedAt": 0
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "InventoryUpsertResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"item\": {\r\n    \"id\": \"string\",\r\n    \"wallet\": \"string\",\r\n    \"sku\": \"string\",\r\n    \"name\": \"string\",\r\n    \"priceUsd\": 0.0,\r\n    \"currency\": \"string\",\r\n    \"stockQty\": 0,\r\n    \"category\": \"string\",\r\n    \"description\": \"string\",\r\n    \"tags\": [\r\n      \"string\"\r\n    ],\r\n    \"images\": [\r\n      \"string\"\r\n    ],\r\n    \"attributes\": {},\r\n    \"costUsd\": 0.0,\r\n    \"taxable\": true,\r\n    \"jurisdictionCode\": \"string\",\r\n    \"industryPack\": \"string\",\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"item\": {\r\n    \"id\": \"string\",\r\n    \"wallet\": \"string\",\r\n    \"sku\": \"string\",\r\n    \"name\": \"string\",\r\n    \"priceUsd\": 0.0,\r\n    \"currency\": \"string\",\r\n    \"stockQty\": 0,\r\n    \"category\": \"string\",\r\n    \"description\": \"string\",\r\n    \"tags\": [\r\n      \"string\"\r\n    ],\r\n    \"images\": [\r\n      \"string\"\r\n    ],\r\n    \"attributes\": {},\r\n    \"costUsd\": 0.0,\r\n    \"taxable\": true,\r\n    \"jurisdictionCode\": \"string\",\r\n    \"industryPack\": \"string\",\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "Invalid input",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/deleteInventory",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "deleteInventory",
            "properties": {
              "displayName": "Delete an inventory item",
              "method": "DELETE",
              "urlTemplate": "/api/inventory?id={id}",
              "templateParameters": [
                {
                  "name": "id",
                  "description": "Inventory item ID",
                  "type": "string",
                  "required": true,
                  "values": [],
                  "schemaId": "6902f7d667ce42094c8688d9",
                  "typeName": "ApiInventoryDeleteRequest"
                }
              ],
              "description": "Delete an inventory item by ID. Requires APIM subscription and `inventory:write` scope.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Delete result",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "DeleteInventoryResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "id_required",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postSplitWithdrawDeprecated",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postSplitWithdrawDeprecated",
            "properties": {
              "displayName": "Deprecated: server-side split withdraw",
              "method": "POST",
              "urlTemplate": "/api/split/withdraw",
              "templateParameters": [],
              "description": "Deprecated in favor of client-side `PaymentSplitter.release` via connected wallet.\nThis endpoint returns 410 Gone and should not be used.\n",
              "responses": [
                {
                  "statusCode": 204,
                  "description": "Deprecated endpoint; returns no content",
                  "representations": [],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitWithdrawPost204x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 410,
                  "description": "Deprecated endpoint; use connected wallet",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "deprecated",
                            "reason": "use_connected_wallet",
                            "message": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitWithdrawPost410ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"error\": \"deprecated\",\r\n  \"reason\": \"use_connected_wallet\",\r\n  \"message\": \"string\"\r\n}",
                      "sample": "{\r\n  \"error\": \"deprecated\",\r\n  \"reason\": \"use_connected_wallet\",\r\n  \"message\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitWithdrawPost410x-correlation-idResponseHeader"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postReceiptTerminal",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postReceiptTerminal",
            "properties": {
              "displayName": "Generate a terminal receipt (single item + tax/fees)",
              "method": "POST",
              "urlTemplate": "/api/receipts/terminal",
              "templateParameters": [],
              "description": "Creates a receipt from a terminal input amount, applies tax and processing fees, and persists. Requires APIM subscription; merchant wallet provided via header `x-wallet` or query param `wallet`.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "amountUsd": 0.0,
                          "label": "string",
                          "currency": "string",
                          "jurisdictionCode": "string",
                          "taxRate": 0.0,
                          "taxComponents": [
                            "string"
                          ]
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ReceiptTerminalCreateRequest",
                    "generatedSample": "{\r\n  \"amountUsd\": 0.0,\r\n  \"label\": \"string\",\r\n  \"currency\": \"string\",\r\n  \"jurisdictionCode\": \"string\",\r\n  \"taxRate\": 0.0,\r\n  \"taxComponents\": [\r\n    \"string\"\r\n  ]\r\n}",
                    "sample": "{\r\n  \"amountUsd\": 0.0,\r\n  \"label\": \"string\",\r\n  \"currency\": \"string\",\r\n  \"jurisdictionCode\": \"string\",\r\n  \"taxRate\": 0.0,\r\n  \"taxComponents\": [\r\n    \"string\"\r\n  ]\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Terminal receipt generated",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "receipt": {
                              "receiptId": "string",
                              "totalUsd": 0.0,
                              "currency": "USD",
                              "lineItems": [
                                {
                                  "label": "string",
                                  "priceUsd": 0.0,
                                  "qty": 0,
                                  "thumb": "string",
                                  "itemId": "string",
                                  "sku": "string"
                                }
                              ],
                              "createdAt": 0,
                              "brandName": "string",
                              "status": "generated",
                              "jurisdictionCode": "string",
                              "taxRate": 0.0,
                              "taxComponents": [
                                "string"
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReceiptTerminalCreateResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsTerminalPost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "wallet_required or invalid_amount",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "split_required (Split contract not configured)",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/createOrder",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "createOrder",
            "properties": {
              "displayName": "Generate an order/receipt from inventory",
              "method": "POST",
              "urlTemplate": "/api/orders",
              "templateParameters": [],
              "description": "Generate an itemized receipt from inventory items with automatic tax computation and processing fee. Requires APIM subscription and `orders:create` scope. Split contract must be configured for the merchant.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "items": [
                            {
                              "sku": "COFFEE-001",
                              "qty": 2
                            },
                            {
                              "sku": "PASTRY-001",
                              "qty": 1
                            }
                          ],
                          "jurisdictionCode": "US-CA"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "OrderCreateRequest",
                    "generatedSample": "{\r\n  \"items\": [\r\n    {\r\n      \"sku\": \"COFFEE-001\",\r\n      \"qty\": 2\r\n    },\r\n    {\r\n      \"sku\": \"PASTRY-001\",\r\n      \"qty\": 1\r\n    }\r\n  ],\r\n  \"jurisdictionCode\": \"US-CA\"\r\n}",
                    "sample": "{\r\n  \"items\": [\r\n    {\r\n      \"sku\": \"COFFEE-001\",\r\n      \"qty\": 2\r\n    },\r\n    {\r\n      \"sku\": \"PASTRY-001\",\r\n      \"qty\": 1\r\n    }\r\n  ],\r\n  \"jurisdictionCode\": \"US-CA\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Receipt generated",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "receipt": {
                              "receiptId": "string",
                              "totalUsd": 0.0,
                              "currency": "USD",
                              "lineItems": [
                                {
                                  "label": "string",
                                  "priceUsd": 0.0,
                                  "qty": 0,
                                  "thumb": "string",
                                  "itemId": "string",
                                  "sku": "string"
                                }
                              ],
                              "createdAt": 0,
                              "brandName": "string",
                              "status": "generated",
                              "jurisdictionCode": "string",
                              "taxRate": 0.0,
                              "taxComponents": [
                                "string"
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "OrderCreateResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "items_required or inventory_item_not_found",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "split_required or forbidden",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "string",
                            "message": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiOrdersPost403ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"error\": \"string\",\r\n  \"message\": \"string\"\r\n}",
                      "sample": "{\r\n  \"error\": \"string\",\r\n  \"message\": \"string\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReceipt",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReceipt",
            "properties": {
              "displayName": "Get a receipt by ID",
              "method": "GET",
              "urlTemplate": "/api/receipts/{id}",
              "templateParameters": [
                {
                  "name": "id",
                  "description": "Receipt ID",
                  "type": "string",
                  "required": true,
                  "values": [],
                  "schemaId": "6902f7d667ce42094c8688d9",
                  "typeName": "ApiReceipts-id-GetRequest"
                }
              ],
              "description": "Requires APIM subscription and `receipts:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Receipt found",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "receiptId": "rcpt_12345",
                            "totalUsd": 27.0,
                            "currency": "USD",
                            "lineItems": [
                              {
                                "label": "Sample Item",
                                "priceUsd": 25.0
                              },
                              {
                                "label": "Tax",
                                "priceUsd": 2.0
                              }
                            ],
                            "createdAt": 1698765432000
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Receipt",
                      "generatedSample": "{\r\n  \"receiptId\": \"rcpt_12345\",\r\n  \"totalUsd\": 27.0,\r\n  \"currency\": \"USD\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"createdAt\": 1698765432000\r\n}",
                      "sample": "{\r\n  \"receiptId\": \"rcpt_12345\",\r\n  \"totalUsd\": 27.0,\r\n  \"currency\": \"USD\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"createdAt\": 1698765432000\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 404,
                  "description": "Not found",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getShopConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getShopConfig",
            "properties": {
              "displayName": "Get merchant shop configuration",
              "method": "GET",
              "urlTemplate": "/api/shop/config",
              "templateParameters": [],
              "description": "Returns merchant shop configuration (branding, layout, tax defaults). Requires APIM subscription and `shop:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Shop configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "config": {
                              "name": "string",
                              "description": "string",
                              "bio": "string",
                              "theme": {
                                "primaryColor": "string",
                                "secondaryColor": "string",
                                "textColor": "string",
                                "accentColor": "string",
                                "brandLogoUrl": "string",
                                "coverPhotoUrl": "string",
                                "fontFamily": "string",
                                "logoShape": "square",
                                "heroFontSize": "microtext"
                              },
                              "arrangement": "grid",
                              "xpPerDollar": 0.0,
                              "slug": "string",
                              "links": [
                                {
                                  "label": "string",
                                  "url": "string"
                                }
                              ],
                              "industryPack": "restaurant",
                              "industryPackActivatedAt": 0,
                              "setupComplete": true,
                              "createdAt": 0,
                              "updatedAt": 0
                            }
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiShopConfigGet200ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"config\": {\r\n    \"name\": \"string\",\r\n    \"description\": \"string\",\r\n    \"bio\": \"string\",\r\n    \"theme\": {\r\n      \"primaryColor\": \"string\",\r\n      \"secondaryColor\": \"string\",\r\n      \"textColor\": \"string\",\r\n      \"accentColor\": \"string\",\r\n      \"brandLogoUrl\": \"string\",\r\n      \"coverPhotoUrl\": \"string\",\r\n      \"fontFamily\": \"string\",\r\n      \"logoShape\": \"square\",\r\n      \"heroFontSize\": \"microtext\"\r\n    },\r\n    \"arrangement\": \"grid\",\r\n    \"xpPerDollar\": 0.0,\r\n    \"slug\": \"string\",\r\n    \"links\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"url\": \"string\"\r\n      }\r\n    ],\r\n    \"industryPack\": \"restaurant\",\r\n    \"industryPackActivatedAt\": 0,\r\n    \"setupComplete\": true,\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  }\r\n}",
                      "sample": "{\r\n  \"config\": {\r\n    \"name\": \"string\",\r\n    \"description\": \"string\",\r\n    \"bio\": \"string\",\r\n    \"theme\": {\r\n      \"primaryColor\": \"string\",\r\n      \"secondaryColor\": \"string\",\r\n      \"textColor\": \"string\",\r\n      \"accentColor\": \"string\",\r\n      \"brandLogoUrl\": \"string\",\r\n      \"coverPhotoUrl\": \"string\",\r\n      \"fontFamily\": \"string\",\r\n      \"logoShape\": \"square\",\r\n      \"heroFontSize\": \"microtext\"\r\n    },\r\n    \"arrangement\": \"grid\",\r\n    \"xpPerDollar\": 0.0,\r\n    \"slug\": \"string\",\r\n    \"links\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"url\": \"string\"\r\n      }\r\n    ],\r\n    \"industryPack\": \"restaurant\",\r\n    \"industryPackActivatedAt\": 0,\r\n    \"setupComplete\": true,\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  }\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getPricingConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getPricingConfig",
            "properties": {
              "displayName": "Get pricing configuration",
              "method": "GET",
              "urlTemplate": "/api/pricing/config",
              "templateParameters": [],
              "description": "Returns pricing defaults (rate per 2 minutes, minimum minutes, discount rules). Requires APIM subscription. Gracefully degrades to defaults if Cosmos is unavailable.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Pricing configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "config": {
                              "ethPer2Min": 0.0,
                              "minMinutes": 0,
                              "discountRules": [
                                {
                                  "minMinutes": 0,
                                  "discountPct": 0.0
                                }
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "PricingConfigResponse",
                      "generatedSample": "{\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReceiptStatus",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReceiptStatus",
            "properties": {
              "displayName": "Get receipt/payment status",
              "method": "GET",
              "urlTemplate": "/api/receipts/status?receiptId={receiptId}",
              "templateParameters": [
                {
                  "name": "receiptId",
                  "description": "Receipt ID to check",
                  "type": "string",
                  "required": true,
                  "values": [],
                  "schemaId": "6902f7d667ce42094c8688d9",
                  "typeName": "ApiReceiptsStatusGetRequest"
                }
              ],
              "description": "Requires APIM subscription and `receipts:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Status payload",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "id": "rcpt_12345",
                            "status": "completed",
                            "transactionHash": "0xabc123...",
                            "currency": "USDC",
                            "amount": 27
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReceiptStatus",
                      "generatedSample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"status\": \"completed\",\r\n  \"transactionHash\": \"0xabc123...\",\r\n  \"currency\": \"USDC\",\r\n  \"amount\": 27\r\n}",
                      "sample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"status\": \"completed\",\r\n  \"transactionHash\": \"0xabc123...\",\r\n  \"currency\": \"USDC\",\r\n  \"amount\": 27\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 404,
                  "description": "Not found",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReserveBalances",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReserveBalances",
            "properties": {
              "displayName": "Get reserve balances for merchant or owner wallet",
              "method": "GET",
              "urlTemplate": "/api/reserve/balances",
              "templateParameters": [],
              "description": "Returns live balances across ETH, USDC, USDT, cbBTC, cbXRP with USD conversions and indexed split metrics. Requires APIM subscription. Wallet resolved via header `x-wallet`, query `wallet`, or environment default.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Reserve balances",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "merchantWallet": "string",
                            "sourceWallet": "string",
                            "splitAddressUsed": "string",
                            "balances": {
                              "ETH": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "USDC": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "USDT": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "cbBTC": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "cbXRP": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              }
                            },
                            "rates": {
                              "ETH_USD": 0.0,
                              "BTC_USD": 0.0,
                              "XRP_USD": 0.0
                            },
                            "totalUsd": 0.0,
                            "indexedMetrics": {
                              "totalVolumeUsd": 0.0,
                              "merchantEarnedUsd": 0.0,
                              "platformFeeUsd": 0.0,
                              "customers": 0,
                              "totalCustomerXp": 0,
                              "transactionCount": 0
                            }
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReserveBalancesResponse",
                      "generatedSample": "{\r\n  \"merchantWallet\": \"string\",\r\n  \"sourceWallet\": \"string\",\r\n  \"splitAddressUsed\": \"string\",\r\n  \"balances\": {\r\n    \"ETH\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDT\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbBTC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbXRP\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    }\r\n  },\r\n  \"rates\": {\r\n    \"ETH_USD\": 0.0,\r\n    \"BTC_USD\": 0.0,\r\n    \"XRP_USD\": 0.0\r\n  },\r\n  \"totalUsd\": 0.0,\r\n  \"indexedMetrics\": {\r\n    \"totalVolumeUsd\": 0.0,\r\n    \"merchantEarnedUsd\": 0.0,\r\n    \"platformFeeUsd\": 0.0,\r\n    \"customers\": 0,\r\n    \"totalCustomerXp\": 0,\r\n    \"transactionCount\": 0\r\n  }\r\n}",
                      "sample": "{\r\n  \"merchantWallet\": \"string\",\r\n  \"sourceWallet\": \"string\",\r\n  \"splitAddressUsed\": \"string\",\r\n  \"balances\": {\r\n    \"ETH\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDT\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbBTC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbXRP\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    }\r\n  },\r\n  \"rates\": {\r\n    \"ETH_USD\": 0.0,\r\n    \"BTC_USD\": 0.0,\r\n    \"XRP_USD\": 0.0\r\n  },\r\n  \"totalUsd\": 0.0,\r\n  \"indexedMetrics\": {\r\n    \"totalVolumeUsd\": 0.0,\r\n    \"merchantEarnedUsd\": 0.0,\r\n    \"platformFeeUsd\": 0.0,\r\n    \"customers\": 0,\r\n    \"totalCustomerXp\": 0,\r\n    \"transactionCount\": 0\r\n  }\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReserveBalancesGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "wallet_unset_or_invalid",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getSiteConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getSiteConfig",
            "properties": {
              "displayName": "Get site configuration (branding and defaults)",
              "method": "GET",
              "urlTemplate": "/api/site/config",
              "templateParameters": [],
              "description": "Returns site-level branding and default payment settings used by the portal. May be public/read-only depending on environment; APIM enforcement can be enabled in production. If APIM is enabled, rate limiting headers may be present. Requests may still be required to traverse AFD in protected environments; direct APIM origin may be rejected with 403.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Site configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "theme": {
                              "primaryColor": "#1f2937",
                              "secondaryColor": "#F54029",
                              "brandLogoUrl": "/cblogod.png",
                              "brandFaviconUrl": "/favicon-32x32.png",
                              "brandName": "PortalPay",
                              "fontFamily": "Inter, ui-sans-serif, system-ui",
                              "receiptBackgroundUrl": "/manifest.webmanifest"
                            },
                            "defaultPaymentToken": "ETH",
                            "processingFeePct": 1.0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "SiteConfig",
                      "generatedSample": "{\r\n  \"theme\": {\r\n    \"primaryColor\": \"#1f2937\",\r\n    \"secondaryColor\": \"#F54029\",\r\n    \"brandLogoUrl\": \"/cblogod.png\",\r\n    \"brandFaviconUrl\": \"/favicon-32x32.png\",\r\n    \"brandName\": \"PortalPay\",\r\n    \"fontFamily\": \"Inter, ui-sans-serif, system-ui\",\r\n    \"receiptBackgroundUrl\": \"/manifest.webmanifest\"\r\n  },\r\n  \"defaultPaymentToken\": \"ETH\",\r\n  \"processingFeePct\": 1.0\r\n}",
                      "sample": "{\r\n  \"theme\": {\r\n    \"primaryColor\": \"#1f2937\",\r\n    \"secondaryColor\": \"#F54029\",\r\n    \"brandLogoUrl\": \"/cblogod.png\",\r\n    \"brandFaviconUrl\": \"/favicon-32x32.png\",\r\n    \"brandName\": \"PortalPay\",\r\n    \"fontFamily\": \"Inter, ui-sans-serif, system-ui\",\r\n    \"receiptBackgroundUrl\": \"/manifest.webmanifest\"\r\n  },\r\n  \"defaultPaymentToken\": \"ETH\",\r\n  \"processingFeePct\": 1.0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getSplitConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getSplitConfig",
            "properties": {
              "displayName": "Get split configuration for merchant",
              "method": "GET",
              "urlTemplate": "/api/split/deploy",
              "templateParameters": [],
              "description": "Returns the split configuration saved for the merchant (address and recipients). Requires APIM subscription and `split:read` scope.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Split configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "split": {
                              "address": "string",
                              "recipients": [
                                {
                                  "address": "string",
                                  "sharesBps": 0
                                }
                              ]
                            }
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "SplitConfigResponse",
                      "generatedSample": "{\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  }\r\n}",
                      "sample": "{\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  }\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getTaxCatalog",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getTaxCatalog",
            "properties": {
              "displayName": "Get tax catalog (illustrative jurisdictions and rates)",
              "method": "GET",
              "urlTemplate": "/api/tax/catalog",
              "templateParameters": [],
              "description": "Returns curated tax jurisdictions with example rates to bootstrap merchant tax settings. For production-grade accuracy, integrate a certified tax provider (TaxJar/Avalara).\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "country",
                    "description": "Filter by country code (e.g., US, CA, UK, EU, AU, SG, JP)",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiTaxCatalogGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Tax catalog response",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "provider": {
                              "name": "string",
                              "apiKeySet": true
                            },
                            "updatedAt": 0,
                            "jurisdictions": [
                              {
                                "code": "string",
                                "name": "string",
                                "rate": 0.0,
                                "country": "string",
                                "type": "string"
                              }
                            ],
                            "disclaimer": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TaxCatalogResponse",
                      "generatedSample": "{\r\n  \"provider\": {\r\n    \"name\": \"string\",\r\n    \"apiKeySet\": true\r\n  },\r\n  \"updatedAt\": 0,\r\n  \"jurisdictions\": [\r\n    {\r\n      \"code\": \"string\",\r\n      \"name\": \"string\",\r\n      \"rate\": 0.0,\r\n      \"country\": \"string\",\r\n      \"type\": \"string\"\r\n    }\r\n  ],\r\n  \"disclaimer\": \"string\"\r\n}",
                      "sample": "{\r\n  \"provider\": {\r\n    \"name\": \"string\",\r\n    \"apiKeySet\": true\r\n  },\r\n  \"updatedAt\": 0,\r\n  \"jurisdictions\": [\r\n    {\r\n      \"code\": \"string\",\r\n      \"name\": \"string\",\r\n      \"rate\": 0.0,\r\n      \"country\": \"string\",\r\n      \"type\": \"string\"\r\n    }\r\n  ],\r\n  \"disclaimer\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiTaxCatalogGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getBillingBalance",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getBillingBalance",
            "properties": {
              "displayName": "Get user balance (time credits)",
              "method": "GET",
              "urlTemplate": "/api/billing/balance",
              "templateParameters": [],
              "description": "Returns remaining time credits for the authenticated wallet (resolved at gateway). May include plan info if subscribed. Requires APIM subscription. Gracefully degrades to zeros if Cosmos is unavailable.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Balance response",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "balanceSeconds": 0,
                            "purchasedSeconds": 0,
                            "usedSeconds": 0,
                            "unlimited": true,
                            "plan": "basic",
                            "planExpiry": 0,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "BalanceResponse",
                      "generatedSample": "{\r\n  \"balanceSeconds\": 0,\r\n  \"purchasedSeconds\": 0,\r\n  \"usedSeconds\": 0,\r\n  \"unlimited\": true,\r\n  \"plan\": \"basic\",\r\n  \"planExpiry\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"balanceSeconds\": 0,\r\n  \"purchasedSeconds\": 0,\r\n  \"usedSeconds\": 0,\r\n  \"unlimited\": true,\r\n  \"plan\": \"basic\",\r\n  \"planExpiry\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    },
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiBillingBalanceGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/healthz",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "healthz",
            "properties": {
              "displayName": "Health check",
              "method": "GET",
              "urlTemplate": "/healthz",
              "templateParameters": [],
              "description": "Returns 200 with a small JSON payload for health probes. Subscription is not required. Accessible via AFD and APIM; used by AFD origin-group HTTPS probe.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Service is healthy",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "status": "ok"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "HealthzGet200ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"status\": \"ok\"\r\n}",
                      "sample": "{\r\n  \"status\": \"ok\"\r\n}"
                    }
                  ],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/listInventory",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "listInventory",
            "properties": {
              "displayName": "List inventory items",
              "method": "GET",
              "urlTemplate": "/api/inventory",
              "templateParameters": [],
              "description": "List inventory items for the merchant associated with the resolved wallet. Requires APIM subscription and `inventory:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "q",
                    "description": "Search term (name, SKU, description, category, tags)",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest"
                  },
                  {
                    "name": "category",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-1"
                  },
                  {
                    "name": "taxable",
                    "type": "string",
                    "values": [
                      "true",
                      "false",
                      "any"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-2"
                  },
                  {
                    "name": "stock",
                    "type": "string",
                    "values": [
                      "in",
                      "out",
                      "any"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-3"
                  },
                  {
                    "name": "priceMin",
                    "type": "number",
                    "format": "float",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-4"
                  },
                  {
                    "name": "priceMax",
                    "type": "number",
                    "format": "float",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-5"
                  },
                  {
                    "name": "tags",
                    "description": "Comma-separated tags",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-6"
                  },
                  {
                    "name": "tagsMode",
                    "description": "Tag match mode",
                    "type": "string",
                    "values": [
                      "any",
                      "all"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-7"
                  },
                  {
                    "name": "pack",
                    "description": "Industry pack filter",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-8"
                  },
                  {
                    "name": "sort",
                    "type": "string",
                    "defaultValue": "updatedAt",
                    "values": [
                      "name",
                      "sku",
                      "priceUsd",
                      "stockQty",
                      "updatedAt"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-9"
                  },
                  {
                    "name": "order",
                    "type": "string",
                    "defaultValue": "desc",
                    "values": [
                      "asc",
                      "desc"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-10"
                  },
                  {
                    "name": "limit",
                    "type": "integer",
                    "format": "int32",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-11"
                  },
                  {
                    "name": "page",
                    "type": "integer",
                    "format": "int32",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-12"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Inventory list",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "items": [
                              {
                                "id": "string",
                                "wallet": "string",
                                "sku": "string",
                                "name": "string",
                                "priceUsd": 0.0,
                                "currency": "string",
                                "stockQty": 0,
                                "category": "string",
                                "description": "string",
                                "tags": [
                                  "string"
                                ],
                                "images": [
                                  "string"
                                ],
                                "attributes": {},
                                "costUsd": 0.0,
                                "taxable": true,
                                "jurisdictionCode": "string",
                                "industryPack": "string",
                                "createdAt": 0,
                                "updatedAt": 0
                              }
                            ],
                            "total": 0,
                            "page": 0,
                            "pageSize": 0,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "InventoryListResponse",
                      "generatedSample": "{\r\n  \"items\": [\r\n    {\r\n      \"id\": \"string\",\r\n      \"wallet\": \"string\",\r\n      \"sku\": \"string\",\r\n      \"name\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"currency\": \"string\",\r\n      \"stockQty\": 0,\r\n      \"category\": \"string\",\r\n      \"description\": \"string\",\r\n      \"tags\": [\r\n        \"string\"\r\n      ],\r\n      \"images\": [\r\n        \"string\"\r\n      ],\r\n      \"attributes\": {},\r\n      \"costUsd\": 0.0,\r\n      \"taxable\": true,\r\n      \"jurisdictionCode\": \"string\",\r\n      \"industryPack\": \"string\",\r\n      \"createdAt\": 0,\r\n      \"updatedAt\": 0\r\n    }\r\n  ],\r\n  \"total\": 0,\r\n  \"page\": 0,\r\n  \"pageSize\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"items\": [\r\n    {\r\n      \"id\": \"string\",\r\n      \"wallet\": \"string\",\r\n      \"sku\": \"string\",\r\n      \"name\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"currency\": \"string\",\r\n      \"stockQty\": 0,\r\n      \"category\": \"string\",\r\n      \"description\": \"string\",\r\n      \"tags\": [\r\n        \"string\"\r\n      ],\r\n      \"images\": [\r\n        \"string\"\r\n      ],\r\n      \"attributes\": {},\r\n      \"costUsd\": 0.0,\r\n      \"taxable\": true,\r\n      \"jurisdictionCode\": \"string\",\r\n      \"industryPack\": \"string\",\r\n      \"createdAt\": 0,\r\n      \"updatedAt\": 0\r\n    }\r\n  ],\r\n  \"total\": 0,\r\n  \"page\": 0,\r\n  \"pageSize\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/listReceipts",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "listReceipts",
            "properties": {
              "displayName": "List receipts",
              "method": "GET",
              "urlTemplate": "/api/receipts",
              "templateParameters": [],
              "description": "List recent receipts for the merchant associated with the resolved wallet. Requires APIM subscription and `receipts:read` scope. Gracefully degrades to in-memory when Cosmos is unavailable.\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "limit",
                    "description": "Number of receipts to return (default 100, max 200)",
                    "type": "integer",
                    "format": "int32",
                    "defaultValue": "100",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiReceiptsGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Recent receipts",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "receipts": [
                              {
                                "receiptId": "R-123456",
                                "totalUsd": 13.09,
                                "currency": "USD",
                                "lineItems": [
                                  {
                                    "label": "Espresso",
                                    "priceUsd": 7.0,
                                    "qty": 2
                                  },
                                  {
                                    "label": "Tax",
                                    "priceUsd": 1.09
                                  },
                                  {
                                    "label": "Processing Fee",
                                    "priceUsd": 0.5
                                  }
                                ],
                                "createdAt": 1698765432000,
                                "brandName": "PortalPay",
                                "status": "paid"
                              }
                            ]
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsGet200ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"receipts\": [\r\n    {\r\n      \"receiptId\": \"R-123456\",\r\n      \"totalUsd\": 13.09,\r\n      \"currency\": \"USD\",\r\n      \"lineItems\": [\r\n        {\r\n          \"label\": \"Espresso\",\r\n          \"priceUsd\": 7.0,\r\n          \"qty\": 2\r\n        },\r\n        {\r\n          \"label\": \"Tax\",\r\n          \"priceUsd\": 1.09\r\n        },\r\n        {\r\n          \"label\": \"Processing Fee\",\r\n          \"priceUsd\": 0.5\r\n        }\r\n      ],\r\n      \"createdAt\": 1698765432000,\r\n      \"brandName\": \"PortalPay\",\r\n      \"status\": \"paid\"\r\n    }\r\n  ]\r\n}",
                      "sample": "{\r\n  \"receipts\": [\r\n    {\r\n      \"receiptId\": \"R-123456\",\r\n      \"totalUsd\": 13.09,\r\n      \"currency\": \"USD\",\r\n      \"lineItems\": [\r\n        {\r\n          \"label\": \"Espresso\",\r\n          \"priceUsd\": 7.0,\r\n          \"qty\": 2\r\n        },\r\n        {\r\n          \"label\": \"Tax\",\r\n          \"priceUsd\": 1.09\r\n        },\r\n        {\r\n          \"label\": \"Processing Fee\",\r\n          \"priceUsd\": 0.5\r\n        }\r\n      ],\r\n      \"createdAt\": 1698765432000,\r\n      \"brandName\": \"PortalPay\",\r\n      \"status\": \"paid\"\r\n    }\r\n  ]\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/listSplitTransactions",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "listSplitTransactions",
            "properties": {
              "displayName": "List split transactions (if configured)",
              "method": "GET",
              "urlTemplate": "/api/split/transactions",
              "templateParameters": [],
              "description": "Returns transactions indexed by the split indexer. Availability varies by deployment. Requires APIM subscription and `split:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "address",
                    "description": "Optional filter by recipient/split address",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiSplitTransactionsGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Array of transactions",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": [
                            {
                              "id": "txn_abc",
                              "receiptId": "rcpt_12345",
                              "amount": 27.0,
                              "currency": "USDC",
                              "status": "completed",
                              "timestamp": "2025-01-01T12:00:00Z",
                              "transactionHash": "0x...",
                              "fees": 0.2
                            }
                          ]
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitTransactionsGet200ApplicationJsonResponse",
                      "generatedSample": "[\r\n  {\r\n    \"id\": \"txn_abc\",\r\n    \"receiptId\": \"rcpt_12345\",\r\n    \"amount\": 27.0,\r\n    \"currency\": \"USDC\",\r\n    \"status\": \"completed\",\r\n    \"timestamp\": \"2025-01-01T12:00:00\",\r\n    \"transactionHash\": \"0x...\",\r\n    \"fees\": 0.2\r\n  }\r\n]",
                      "sample": "[\r\n  {\r\n    \"id\": \"txn_abc\",\r\n    \"receiptId\": \"rcpt_12345\",\r\n    \"amount\": 27.0,\r\n    \"currency\": \"USDC\",\r\n    \"status\": \"completed\",\r\n    \"timestamp\": \"2025-01-01T12:00:00\",\r\n    \"transactionHash\": \"0x...\",\r\n    \"fees\": 0.2\r\n  }\r\n]"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postReceiptRefund",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postReceiptRefund",
            "properties": {
              "displayName": "Log a refund for a receipt (merchant/admin via portal)",
              "method": "POST",
              "urlTemplate": "/api/receipts/refund",
              "templateParameters": [],
              "description": "Logs a refund entry for a receipt and updates status history. Requires JWT and CSRF via portal UI. APIM developers typically do not call this directly; included for completeness of public surface.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "receiptId": "string",
                          "wallet": "string",
                          "buyer": "string",
                          "usd": 0.0,
                          "items": [
                            {
                              "label": "string",
                              "priceUsd": 0.0,
                              "qty": 0
                            }
                          ],
                          "txHash": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ReceiptRefundRequest",
                    "generatedSample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"buyer\": \"string\",\r\n  \"usd\": 0.0,\r\n  \"items\": [\r\n    {\r\n      \"label\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"qty\": 0\r\n    }\r\n  ],\r\n  \"txHash\": \"string\"\r\n}",
                    "sample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"buyer\": \"string\",\r\n  \"usd\": 0.0,\r\n  \"items\": [\r\n    {\r\n      \"label\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"qty\": 0\r\n    }\r\n  ],\r\n  \"txHash\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Refund logged",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "OkResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsRefundPost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "missing_receipt_id or invalid_wallet or invalid_buyer or invalid_usd",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReserveRecommendation",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReserveRecommendation",
            "properties": {
              "displayName": "Recommend settlement token and frequency",
              "method": "GET",
              "urlTemplate": "/api/reserve/recommend",
              "templateParameters": [],
              "description": "Recommends which token to settle with and how frequently based on target reserve ratios vs current balances. Considers optional upcoming receipt amount.\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "receiptUsd",
                    "description": "Optional upcoming payment amount to consider",
                    "type": "number",
                    "format": "float",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiReserveRecommendGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Recommendation",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "recommendedToken": "USDC",
                            "frequency": 0,
                            "deficitFraction": 0.0,
                            "maxDeficit": 0.0,
                            "totalUsd": 0.0,
                            "futureTotal": 0.0,
                            "targets": {},
                            "currentUsd": {},
                            "deficits": {}
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReserveRecommendationResponse",
                      "generatedSample": "{\r\n  \"recommendedToken\": \"USDC\",\r\n  \"frequency\": 0,\r\n  \"deficitFraction\": 0.0,\r\n  \"maxDeficit\": 0.0,\r\n  \"totalUsd\": 0.0,\r\n  \"futureTotal\": 0.0,\r\n  \"targets\": {},\r\n  \"currentUsd\": {},\r\n  \"deficits\": {}\r\n}",
                      "sample": "{\r\n  \"recommendedToken\": \"USDC\",\r\n  \"frequency\": 0,\r\n  \"deficitFraction\": 0.0,\r\n  \"maxDeficit\": 0.0,\r\n  \"totalUsd\": 0.0,\r\n  \"futureTotal\": 0.0,\r\n  \"targets\": {},\r\n  \"currentUsd\": {},\r\n  \"deficits\": {}\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReserveRecommendGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "recommendation_failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postBillingPurchase",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postBillingPurchase",
            "properties": {
              "displayName": "Record a purchase/payment event",
              "method": "POST",
              "urlTemplate": "/api/billing/purchase",
              "templateParameters": [],
              "description": "Records a purchase tied to a merchant recipient and updates receipt status lifecycle. Validates optional on-chain transaction recipient. Triggers split indexing when applicable. Requires APIM subscription. Wallet is resolved via gateway/JWT or provided header/body in non-prod.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "wallet": "string",
                          "seconds": 0,
                          "usd": 0.0,
                          "eth": 0.0,
                          "txHash": "string",
                          "idempotencyKey": "string",
                          "recipient": "string",
                          "receiptId": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "BillingPurchaseRequest",
                    "generatedSample": "{\r\n  \"wallet\": \"string\",\r\n  \"seconds\": 0,\r\n  \"usd\": 0.0,\r\n  \"eth\": 0.0,\r\n  \"txHash\": \"string\",\r\n  \"idempotencyKey\": \"string\",\r\n  \"recipient\": \"string\",\r\n  \"receiptId\": \"string\"\r\n}",
                    "sample": "{\r\n  \"wallet\": \"string\",\r\n  \"seconds\": 0,\r\n  \"usd\": 0.0,\r\n  \"eth\": 0.0,\r\n  \"txHash\": \"string\",\r\n  \"idempotencyKey\": \"string\",\r\n  \"recipient\": \"string\",\r\n  \"receiptId\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Purchase recorded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "event": {
                              "id": "string",
                              "type": "purchase",
                              "wallet": "string",
                              "seconds": 0,
                              "usd": 0.0,
                              "eth": 0.0,
                              "txHash": "string",
                              "recipient": "string",
                              "receiptId": "string",
                              "portalFeePct": 0.0,
                              "portalFeeRecipient": "string",
                              "portalFeeUsd": 0.0,
                              "ts": 0
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "BillingPurchaseResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"event\": {\r\n    \"id\": \"string\",\r\n    \"type\": \"purchase\",\r\n    \"wallet\": \"string\",\r\n    \"seconds\": 0,\r\n    \"usd\": 0.0,\r\n    \"eth\": 0.0,\r\n    \"txHash\": \"string\",\r\n    \"recipient\": \"string\",\r\n    \"receiptId\": \"string\",\r\n    \"portalFeePct\": 0.0,\r\n    \"portalFeeRecipient\": \"string\",\r\n    \"portalFeeUsd\": 0.0,\r\n    \"ts\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"event\": {\r\n    \"id\": \"string\",\r\n    \"type\": \"purchase\",\r\n    \"wallet\": \"string\",\r\n    \"seconds\": 0,\r\n    \"usd\": 0.0,\r\n    \"eth\": 0.0,\r\n    \"txHash\": \"string\",\r\n    \"recipient\": \"string\",\r\n    \"receiptId\": \"string\",\r\n    \"portalFeePct\": 0.0,\r\n    \"portalFeeRecipient\": \"string\",\r\n    \"portalFeeUsd\": 0.0,\r\n    \"ts\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    },
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiBillingPurchasePost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "invalid wallet or invalid seconds or merchant_required or tx_mismatch",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "Server error",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/upsertPricingConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "upsertPricingConfig",
            "properties": {
              "displayName": "Update pricing configuration (owner-only JWT; APIM writes not permitted)",
              "method": "POST",
              "urlTemplate": "/api/pricing/config",
              "templateParameters": [],
              "description": "Updates pricing configuration. Admin-only via JWT and CSRF; APIM dev subscriptions cannot write. Included for completeness; not accessible via public developer subscription.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "ethPer2Min": 0.0,
                          "minMinutes": 0,
                          "discountRules": [
                            {
                              "minMinutes": 0,
                              "discountPct": 0.0
                            }
                          ]
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "PricingConfigUpsertRequest",
                    "generatedSample": "{\r\n  \"ethPer2Min\": 0.0,\r\n  \"minMinutes\": 0,\r\n  \"discountRules\": [\r\n    {\r\n      \"minMinutes\": 0,\r\n      \"discountPct\": 0.0\r\n    }\r\n  ]\r\n}",
                    "sample": "{\r\n  \"ethPer2Min\": 0.0,\r\n  \"minMinutes\": 0,\r\n  \"discountRules\": [\r\n    {\r\n      \"minMinutes\": 0,\r\n      \"discountPct\": 0.0\r\n    }\r\n  ]\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Updated pricing configuration (or degraded fallback)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "config": {
                              "ethPer2Min": 0.0,
                              "minMinutes": 0,
                              "discountRules": [
                                {
                                  "minMinutes": 0,
                                  "discountPct": 0.0
                                }
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "PricingConfigUpsertResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 400,
                  "description": "invalid_rate",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postReceiptStatus",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postReceiptStatus",
            "properties": {
              "displayName": "Update receipt status (tracking and sensitive events)",
              "method": "POST",
              "urlTemplate": "/api/receipts/status",
              "templateParameters": [],
              "description": "Updates receipt status timeline. Certain tracking statuses may be allowed without JWT (e.g. link_opened, buyer_logged_in, checkout_initialized). Sensitive updates (e.g. checkout_success, refund_*) require JWT and CSRF via the portal UI; APIM developer subscriptions typically use tracking statuses.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "receiptId": "string",
                          "wallet": "string",
                          "status": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ReceiptStatusUpdateRequest",
                    "generatedSample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"status\": \"string\"\r\n}",
                    "sample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"status\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Status update result",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "OkResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsStatusPost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "missing_receipt_id or invalid_wallet or missing_status",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          }
        ]
      }
    },
    "portalpay-pro": {
      "apis": [
        {
          "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/products/portalpay-pro/apis/portalpay-api",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "portalpay-api",
          "properties": {
            "displayName": "PortalPay API",
            "apiRevision": "1",
            "description": "Public API surface for PortalPay under a hardened posture: Azure Front Door Premium (AFD) gateway \u00e2\u2020\u2019 Azure API Management (APIM).\nAll developer-facing endpoints require an APIM subscription key header `Ocp-Apim-Subscription-Key` and must traverse AFD.\nOrigin enforcement: AFD injects an internal header `x-edge-secret`; APIM inbound policy validates it and may reject direct-origin requests with 403.\nWallet identity is resolved at the gateway and injected to the backend via `x-resolved-wallet`; client-supplied `x-wallet` header and `wallet` parameters are ignored.\nHealth endpoint: `GET /healthz` returns 200 JSON for probes; does not require a subscription.\nNote: Some endpoints are read-only or environment-gated in production. Admin/sensitive routes (JWT-only) are not part of this spec.\n",
            "specificationLastUpdated": "2025-10-30T19:12:55.2966667Z",
            "subscriptionRequired": true,
            "serviceUrl": "https://payportal.azurewebsites.net",
            "backendId": null,
            "path": "portalpay",
            "protocols": [
              "https"
            ],
            "mcpProperties": null,
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          }
        }
      ],
      "operations": {
        "portalpay-api": [
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/upsertSplitConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "upsertSplitConfig",
            "properties": {
              "displayName": "Configure split (admin-only JWT; APIM writes not permitted)",
              "method": "POST",
              "urlTemplate": "/api/split/deploy",
              "templateParameters": [],
              "description": "Idempotently persists split address and recipients for a merchant. Admin-only via JWT and CSRF. APIM developer subscriptions cannot perform this write.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "splitAddress": "string",
                          "recipients": [
                            {
                              "address": "string",
                              "sharesBps": 0
                            }
                          ]
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "SplitConfigUpsertRequest",
                    "generatedSample": "{\r\n  \"splitAddress\": \"string\",\r\n  \"recipients\": [\r\n    {\r\n      \"address\": \"string\",\r\n      \"sharesBps\": 0\r\n    }\r\n  ]\r\n}",
                    "sample": "{\r\n  \"splitAddress\": \"string\",\r\n  \"recipients\": [\r\n    {\r\n      \"address\": \"string\",\r\n      \"sharesBps\": 0\r\n    }\r\n  ]\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Split configuration result",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "split": {
                              "address": "string",
                              "recipients": [
                                {
                                  "address": "string",
                                  "sharesBps": 0
                                }
                              ]
                            },
                            "idempotent": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "SplitConfigUpsertResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  },\r\n  \"idempotent\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  },\r\n  \"idempotent\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/createReceipt",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "createReceipt",
            "properties": {
              "displayName": "Create a receipt payload for a QR-code payment portal",
              "method": "POST",
              "urlTemplate": "/api/receipts",
              "templateParameters": [],
              "description": "Create an itemized receipt used by the payment portal. The portal URL can be QR-encoded and printed on POS receipts. Requires APIM subscription and `receipts:write` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "id": "rcpt_12345",
                          "lineItems": [
                            {
                              "label": "Sample Item",
                              "priceUsd": 25.0
                            },
                            {
                              "label": "Tax",
                              "priceUsd": 2.0
                            }
                          ],
                          "totalUsd": 27.0
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "CreateReceiptRequest",
                    "generatedSample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"totalUsd\": 27.0\r\n}",
                    "sample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"totalUsd\": 27.0\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 201,
                  "description": "Receipt created",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "id": "rcpt_12345",
                            "paymentUrl": "https://pay.ledger1.ai/pay/rcpt_12345",
                            "status": "pending"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "CreateReceiptResponse",
                      "generatedSample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"paymentUrl\": \"https://pay.ledger1.ai/pay/rcpt_12345\",\r\n  \"status\": \"pending\"\r\n}",
                      "sample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"paymentUrl\": \"https://pay.ledger1.ai/pay/rcpt_12345\",\r\n  \"status\": \"pending\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "Invalid request",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "Server error",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/upsertInventory",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "upsertInventory",
            "properties": {
              "displayName": "Create or update an inventory item",
              "method": "POST",
              "urlTemplate": "/api/inventory",
              "templateParameters": [],
              "description": "Upsert (create/update) an inventory item. Requires APIM subscription and `inventory:write` scope. Ownership/admin is enforced for JWT callers; APIM callers are bound to their subscription wallet.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "id": "string",
                          "sku": "string",
                          "name": "string",
                          "priceUsd": 0.0,
                          "stockQty": 0,
                          "currency": "string",
                          "category": "string",
                          "description": "string",
                          "tags": [
                            "string"
                          ],
                          "images": [
                            "string"
                          ],
                          "attributes": {},
                          "costUsd": 0.0,
                          "taxable": true,
                          "jurisdictionCode": "string",
                          "industryPack": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "InventoryUpsertRequest",
                    "generatedSample": "{\r\n  \"id\": \"string\",\r\n  \"sku\": \"string\",\r\n  \"name\": \"string\",\r\n  \"priceUsd\": 0.0,\r\n  \"stockQty\": 0,\r\n  \"currency\": \"string\",\r\n  \"category\": \"string\",\r\n  \"description\": \"string\",\r\n  \"tags\": [\r\n    \"string\"\r\n  ],\r\n  \"images\": [\r\n    \"string\"\r\n  ],\r\n  \"attributes\": {},\r\n  \"costUsd\": 0.0,\r\n  \"taxable\": true,\r\n  \"jurisdictionCode\": \"string\",\r\n  \"industryPack\": \"string\"\r\n}",
                    "sample": "{\r\n  \"id\": \"string\",\r\n  \"sku\": \"string\",\r\n  \"name\": \"string\",\r\n  \"priceUsd\": 0.0,\r\n  \"stockQty\": 0,\r\n  \"currency\": \"string\",\r\n  \"category\": \"string\",\r\n  \"description\": \"string\",\r\n  \"tags\": [\r\n    \"string\"\r\n  ],\r\n  \"images\": [\r\n    \"string\"\r\n  ],\r\n  \"attributes\": {},\r\n  \"costUsd\": 0.0,\r\n  \"taxable\": true,\r\n  \"jurisdictionCode\": \"string\",\r\n  \"industryPack\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Upserted item",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "item": {
                              "id": "string",
                              "wallet": "string",
                              "sku": "string",
                              "name": "string",
                              "priceUsd": 0.0,
                              "currency": "string",
                              "stockQty": 0,
                              "category": "string",
                              "description": "string",
                              "tags": [
                                "string"
                              ],
                              "images": [
                                "string"
                              ],
                              "attributes": {},
                              "costUsd": 0.0,
                              "taxable": true,
                              "jurisdictionCode": "string",
                              "industryPack": "string",
                              "createdAt": 0,
                              "updatedAt": 0
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "InventoryUpsertResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"item\": {\r\n    \"id\": \"string\",\r\n    \"wallet\": \"string\",\r\n    \"sku\": \"string\",\r\n    \"name\": \"string\",\r\n    \"priceUsd\": 0.0,\r\n    \"currency\": \"string\",\r\n    \"stockQty\": 0,\r\n    \"category\": \"string\",\r\n    \"description\": \"string\",\r\n    \"tags\": [\r\n      \"string\"\r\n    ],\r\n    \"images\": [\r\n      \"string\"\r\n    ],\r\n    \"attributes\": {},\r\n    \"costUsd\": 0.0,\r\n    \"taxable\": true,\r\n    \"jurisdictionCode\": \"string\",\r\n    \"industryPack\": \"string\",\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"item\": {\r\n    \"id\": \"string\",\r\n    \"wallet\": \"string\",\r\n    \"sku\": \"string\",\r\n    \"name\": \"string\",\r\n    \"priceUsd\": 0.0,\r\n    \"currency\": \"string\",\r\n    \"stockQty\": 0,\r\n    \"category\": \"string\",\r\n    \"description\": \"string\",\r\n    \"tags\": [\r\n      \"string\"\r\n    ],\r\n    \"images\": [\r\n      \"string\"\r\n    ],\r\n    \"attributes\": {},\r\n    \"costUsd\": 0.0,\r\n    \"taxable\": true,\r\n    \"jurisdictionCode\": \"string\",\r\n    \"industryPack\": \"string\",\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "Invalid input",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/deleteInventory",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "deleteInventory",
            "properties": {
              "displayName": "Delete an inventory item",
              "method": "DELETE",
              "urlTemplate": "/api/inventory?id={id}",
              "templateParameters": [
                {
                  "name": "id",
                  "description": "Inventory item ID",
                  "type": "string",
                  "required": true,
                  "values": [],
                  "schemaId": "6902f7d667ce42094c8688d9",
                  "typeName": "ApiInventoryDeleteRequest"
                }
              ],
              "description": "Delete an inventory item by ID. Requires APIM subscription and `inventory:write` scope.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Delete result",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "DeleteInventoryResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "id_required",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postSplitWithdrawDeprecated",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postSplitWithdrawDeprecated",
            "properties": {
              "displayName": "Deprecated: server-side split withdraw",
              "method": "POST",
              "urlTemplate": "/api/split/withdraw",
              "templateParameters": [],
              "description": "Deprecated in favor of client-side `PaymentSplitter.release` via connected wallet.\nThis endpoint returns 410 Gone and should not be used.\n",
              "responses": [
                {
                  "statusCode": 204,
                  "description": "Deprecated endpoint; returns no content",
                  "representations": [],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitWithdrawPost204x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 410,
                  "description": "Deprecated endpoint; use connected wallet",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "deprecated",
                            "reason": "use_connected_wallet",
                            "message": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitWithdrawPost410ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"error\": \"deprecated\",\r\n  \"reason\": \"use_connected_wallet\",\r\n  \"message\": \"string\"\r\n}",
                      "sample": "{\r\n  \"error\": \"deprecated\",\r\n  \"reason\": \"use_connected_wallet\",\r\n  \"message\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitWithdrawPost410x-correlation-idResponseHeader"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postReceiptTerminal",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postReceiptTerminal",
            "properties": {
              "displayName": "Generate a terminal receipt (single item + tax/fees)",
              "method": "POST",
              "urlTemplate": "/api/receipts/terminal",
              "templateParameters": [],
              "description": "Creates a receipt from a terminal input amount, applies tax and processing fees, and persists. Requires APIM subscription; merchant wallet provided via header `x-wallet` or query param `wallet`.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "amountUsd": 0.0,
                          "label": "string",
                          "currency": "string",
                          "jurisdictionCode": "string",
                          "taxRate": 0.0,
                          "taxComponents": [
                            "string"
                          ]
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ReceiptTerminalCreateRequest",
                    "generatedSample": "{\r\n  \"amountUsd\": 0.0,\r\n  \"label\": \"string\",\r\n  \"currency\": \"string\",\r\n  \"jurisdictionCode\": \"string\",\r\n  \"taxRate\": 0.0,\r\n  \"taxComponents\": [\r\n    \"string\"\r\n  ]\r\n}",
                    "sample": "{\r\n  \"amountUsd\": 0.0,\r\n  \"label\": \"string\",\r\n  \"currency\": \"string\",\r\n  \"jurisdictionCode\": \"string\",\r\n  \"taxRate\": 0.0,\r\n  \"taxComponents\": [\r\n    \"string\"\r\n  ]\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Terminal receipt generated",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "receipt": {
                              "receiptId": "string",
                              "totalUsd": 0.0,
                              "currency": "USD",
                              "lineItems": [
                                {
                                  "label": "string",
                                  "priceUsd": 0.0,
                                  "qty": 0,
                                  "thumb": "string",
                                  "itemId": "string",
                                  "sku": "string"
                                }
                              ],
                              "createdAt": 0,
                              "brandName": "string",
                              "status": "generated",
                              "jurisdictionCode": "string",
                              "taxRate": 0.0,
                              "taxComponents": [
                                "string"
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReceiptTerminalCreateResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsTerminalPost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "wallet_required or invalid_amount",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "split_required (Split contract not configured)",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/createOrder",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "createOrder",
            "properties": {
              "displayName": "Generate an order/receipt from inventory",
              "method": "POST",
              "urlTemplate": "/api/orders",
              "templateParameters": [],
              "description": "Generate an itemized receipt from inventory items with automatic tax computation and processing fee. Requires APIM subscription and `orders:create` scope. Split contract must be configured for the merchant.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "items": [
                            {
                              "sku": "COFFEE-001",
                              "qty": 2
                            },
                            {
                              "sku": "PASTRY-001",
                              "qty": 1
                            }
                          ],
                          "jurisdictionCode": "US-CA"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "OrderCreateRequest",
                    "generatedSample": "{\r\n  \"items\": [\r\n    {\r\n      \"sku\": \"COFFEE-001\",\r\n      \"qty\": 2\r\n    },\r\n    {\r\n      \"sku\": \"PASTRY-001\",\r\n      \"qty\": 1\r\n    }\r\n  ],\r\n  \"jurisdictionCode\": \"US-CA\"\r\n}",
                    "sample": "{\r\n  \"items\": [\r\n    {\r\n      \"sku\": \"COFFEE-001\",\r\n      \"qty\": 2\r\n    },\r\n    {\r\n      \"sku\": \"PASTRY-001\",\r\n      \"qty\": 1\r\n    }\r\n  ],\r\n  \"jurisdictionCode\": \"US-CA\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Receipt generated",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "receipt": {
                              "receiptId": "string",
                              "totalUsd": 0.0,
                              "currency": "USD",
                              "lineItems": [
                                {
                                  "label": "string",
                                  "priceUsd": 0.0,
                                  "qty": 0,
                                  "thumb": "string",
                                  "itemId": "string",
                                  "sku": "string"
                                }
                              ],
                              "createdAt": 0,
                              "brandName": "string",
                              "status": "generated",
                              "jurisdictionCode": "string",
                              "taxRate": 0.0,
                              "taxComponents": [
                                "string"
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "OrderCreateResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "items_required or inventory_item_not_found",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "split_required or forbidden",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "string",
                            "message": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiOrdersPost403ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"error\": \"string\",\r\n  \"message\": \"string\"\r\n}",
                      "sample": "{\r\n  \"error\": \"string\",\r\n  \"message\": \"string\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReceipt",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReceipt",
            "properties": {
              "displayName": "Get a receipt by ID",
              "method": "GET",
              "urlTemplate": "/api/receipts/{id}",
              "templateParameters": [
                {
                  "name": "id",
                  "description": "Receipt ID",
                  "type": "string",
                  "required": true,
                  "values": [],
                  "schemaId": "6902f7d667ce42094c8688d9",
                  "typeName": "ApiReceipts-id-GetRequest"
                }
              ],
              "description": "Requires APIM subscription and `receipts:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Receipt found",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "receiptId": "rcpt_12345",
                            "totalUsd": 27.0,
                            "currency": "USD",
                            "lineItems": [
                              {
                                "label": "Sample Item",
                                "priceUsd": 25.0
                              },
                              {
                                "label": "Tax",
                                "priceUsd": 2.0
                              }
                            ],
                            "createdAt": 1698765432000
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Receipt",
                      "generatedSample": "{\r\n  \"receiptId\": \"rcpt_12345\",\r\n  \"totalUsd\": 27.0,\r\n  \"currency\": \"USD\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"createdAt\": 1698765432000\r\n}",
                      "sample": "{\r\n  \"receiptId\": \"rcpt_12345\",\r\n  \"totalUsd\": 27.0,\r\n  \"currency\": \"USD\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"createdAt\": 1698765432000\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 404,
                  "description": "Not found",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getShopConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getShopConfig",
            "properties": {
              "displayName": "Get merchant shop configuration",
              "method": "GET",
              "urlTemplate": "/api/shop/config",
              "templateParameters": [],
              "description": "Returns merchant shop configuration (branding, layout, tax defaults). Requires APIM subscription and `shop:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Shop configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "config": {
                              "name": "string",
                              "description": "string",
                              "bio": "string",
                              "theme": {
                                "primaryColor": "string",
                                "secondaryColor": "string",
                                "textColor": "string",
                                "accentColor": "string",
                                "brandLogoUrl": "string",
                                "coverPhotoUrl": "string",
                                "fontFamily": "string",
                                "logoShape": "square",
                                "heroFontSize": "microtext"
                              },
                              "arrangement": "grid",
                              "xpPerDollar": 0.0,
                              "slug": "string",
                              "links": [
                                {
                                  "label": "string",
                                  "url": "string"
                                }
                              ],
                              "industryPack": "restaurant",
                              "industryPackActivatedAt": 0,
                              "setupComplete": true,
                              "createdAt": 0,
                              "updatedAt": 0
                            }
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiShopConfigGet200ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"config\": {\r\n    \"name\": \"string\",\r\n    \"description\": \"string\",\r\n    \"bio\": \"string\",\r\n    \"theme\": {\r\n      \"primaryColor\": \"string\",\r\n      \"secondaryColor\": \"string\",\r\n      \"textColor\": \"string\",\r\n      \"accentColor\": \"string\",\r\n      \"brandLogoUrl\": \"string\",\r\n      \"coverPhotoUrl\": \"string\",\r\n      \"fontFamily\": \"string\",\r\n      \"logoShape\": \"square\",\r\n      \"heroFontSize\": \"microtext\"\r\n    },\r\n    \"arrangement\": \"grid\",\r\n    \"xpPerDollar\": 0.0,\r\n    \"slug\": \"string\",\r\n    \"links\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"url\": \"string\"\r\n      }\r\n    ],\r\n    \"industryPack\": \"restaurant\",\r\n    \"industryPackActivatedAt\": 0,\r\n    \"setupComplete\": true,\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  }\r\n}",
                      "sample": "{\r\n  \"config\": {\r\n    \"name\": \"string\",\r\n    \"description\": \"string\",\r\n    \"bio\": \"string\",\r\n    \"theme\": {\r\n      \"primaryColor\": \"string\",\r\n      \"secondaryColor\": \"string\",\r\n      \"textColor\": \"string\",\r\n      \"accentColor\": \"string\",\r\n      \"brandLogoUrl\": \"string\",\r\n      \"coverPhotoUrl\": \"string\",\r\n      \"fontFamily\": \"string\",\r\n      \"logoShape\": \"square\",\r\n      \"heroFontSize\": \"microtext\"\r\n    },\r\n    \"arrangement\": \"grid\",\r\n    \"xpPerDollar\": 0.0,\r\n    \"slug\": \"string\",\r\n    \"links\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"url\": \"string\"\r\n      }\r\n    ],\r\n    \"industryPack\": \"restaurant\",\r\n    \"industryPackActivatedAt\": 0,\r\n    \"setupComplete\": true,\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  }\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getPricingConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getPricingConfig",
            "properties": {
              "displayName": "Get pricing configuration",
              "method": "GET",
              "urlTemplate": "/api/pricing/config",
              "templateParameters": [],
              "description": "Returns pricing defaults (rate per 2 minutes, minimum minutes, discount rules). Requires APIM subscription. Gracefully degrades to defaults if Cosmos is unavailable.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Pricing configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "config": {
                              "ethPer2Min": 0.0,
                              "minMinutes": 0,
                              "discountRules": [
                                {
                                  "minMinutes": 0,
                                  "discountPct": 0.0
                                }
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "PricingConfigResponse",
                      "generatedSample": "{\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReceiptStatus",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReceiptStatus",
            "properties": {
              "displayName": "Get receipt/payment status",
              "method": "GET",
              "urlTemplate": "/api/receipts/status?receiptId={receiptId}",
              "templateParameters": [
                {
                  "name": "receiptId",
                  "description": "Receipt ID to check",
                  "type": "string",
                  "required": true,
                  "values": [],
                  "schemaId": "6902f7d667ce42094c8688d9",
                  "typeName": "ApiReceiptsStatusGetRequest"
                }
              ],
              "description": "Requires APIM subscription and `receipts:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Status payload",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "id": "rcpt_12345",
                            "status": "completed",
                            "transactionHash": "0xabc123...",
                            "currency": "USDC",
                            "amount": 27
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReceiptStatus",
                      "generatedSample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"status\": \"completed\",\r\n  \"transactionHash\": \"0xabc123...\",\r\n  \"currency\": \"USDC\",\r\n  \"amount\": 27\r\n}",
                      "sample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"status\": \"completed\",\r\n  \"transactionHash\": \"0xabc123...\",\r\n  \"currency\": \"USDC\",\r\n  \"amount\": 27\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 404,
                  "description": "Not found",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReserveBalances",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReserveBalances",
            "properties": {
              "displayName": "Get reserve balances for merchant or owner wallet",
              "method": "GET",
              "urlTemplate": "/api/reserve/balances",
              "templateParameters": [],
              "description": "Returns live balances across ETH, USDC, USDT, cbBTC, cbXRP with USD conversions and indexed split metrics. Requires APIM subscription. Wallet resolved via header `x-wallet`, query `wallet`, or environment default.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Reserve balances",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "merchantWallet": "string",
                            "sourceWallet": "string",
                            "splitAddressUsed": "string",
                            "balances": {
                              "ETH": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "USDC": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "USDT": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "cbBTC": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "cbXRP": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              }
                            },
                            "rates": {
                              "ETH_USD": 0.0,
                              "BTC_USD": 0.0,
                              "XRP_USD": 0.0
                            },
                            "totalUsd": 0.0,
                            "indexedMetrics": {
                              "totalVolumeUsd": 0.0,
                              "merchantEarnedUsd": 0.0,
                              "platformFeeUsd": 0.0,
                              "customers": 0,
                              "totalCustomerXp": 0,
                              "transactionCount": 0
                            }
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReserveBalancesResponse",
                      "generatedSample": "{\r\n  \"merchantWallet\": \"string\",\r\n  \"sourceWallet\": \"string\",\r\n  \"splitAddressUsed\": \"string\",\r\n  \"balances\": {\r\n    \"ETH\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDT\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbBTC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbXRP\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    }\r\n  },\r\n  \"rates\": {\r\n    \"ETH_USD\": 0.0,\r\n    \"BTC_USD\": 0.0,\r\n    \"XRP_USD\": 0.0\r\n  },\r\n  \"totalUsd\": 0.0,\r\n  \"indexedMetrics\": {\r\n    \"totalVolumeUsd\": 0.0,\r\n    \"merchantEarnedUsd\": 0.0,\r\n    \"platformFeeUsd\": 0.0,\r\n    \"customers\": 0,\r\n    \"totalCustomerXp\": 0,\r\n    \"transactionCount\": 0\r\n  }\r\n}",
                      "sample": "{\r\n  \"merchantWallet\": \"string\",\r\n  \"sourceWallet\": \"string\",\r\n  \"splitAddressUsed\": \"string\",\r\n  \"balances\": {\r\n    \"ETH\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDT\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbBTC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbXRP\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    }\r\n  },\r\n  \"rates\": {\r\n    \"ETH_USD\": 0.0,\r\n    \"BTC_USD\": 0.0,\r\n    \"XRP_USD\": 0.0\r\n  },\r\n  \"totalUsd\": 0.0,\r\n  \"indexedMetrics\": {\r\n    \"totalVolumeUsd\": 0.0,\r\n    \"merchantEarnedUsd\": 0.0,\r\n    \"platformFeeUsd\": 0.0,\r\n    \"customers\": 0,\r\n    \"totalCustomerXp\": 0,\r\n    \"transactionCount\": 0\r\n  }\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReserveBalancesGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "wallet_unset_or_invalid",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getSiteConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getSiteConfig",
            "properties": {
              "displayName": "Get site configuration (branding and defaults)",
              "method": "GET",
              "urlTemplate": "/api/site/config",
              "templateParameters": [],
              "description": "Returns site-level branding and default payment settings used by the portal. May be public/read-only depending on environment; APIM enforcement can be enabled in production. If APIM is enabled, rate limiting headers may be present. Requests may still be required to traverse AFD in protected environments; direct APIM origin may be rejected with 403.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Site configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "theme": {
                              "primaryColor": "#1f2937",
                              "secondaryColor": "#F54029",
                              "brandLogoUrl": "/cblogod.png",
                              "brandFaviconUrl": "/favicon-32x32.png",
                              "brandName": "PortalPay",
                              "fontFamily": "Inter, ui-sans-serif, system-ui",
                              "receiptBackgroundUrl": "/manifest.webmanifest"
                            },
                            "defaultPaymentToken": "ETH",
                            "processingFeePct": 1.0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "SiteConfig",
                      "generatedSample": "{\r\n  \"theme\": {\r\n    \"primaryColor\": \"#1f2937\",\r\n    \"secondaryColor\": \"#F54029\",\r\n    \"brandLogoUrl\": \"/cblogod.png\",\r\n    \"brandFaviconUrl\": \"/favicon-32x32.png\",\r\n    \"brandName\": \"PortalPay\",\r\n    \"fontFamily\": \"Inter, ui-sans-serif, system-ui\",\r\n    \"receiptBackgroundUrl\": \"/manifest.webmanifest\"\r\n  },\r\n  \"defaultPaymentToken\": \"ETH\",\r\n  \"processingFeePct\": 1.0\r\n}",
                      "sample": "{\r\n  \"theme\": {\r\n    \"primaryColor\": \"#1f2937\",\r\n    \"secondaryColor\": \"#F54029\",\r\n    \"brandLogoUrl\": \"/cblogod.png\",\r\n    \"brandFaviconUrl\": \"/favicon-32x32.png\",\r\n    \"brandName\": \"PortalPay\",\r\n    \"fontFamily\": \"Inter, ui-sans-serif, system-ui\",\r\n    \"receiptBackgroundUrl\": \"/manifest.webmanifest\"\r\n  },\r\n  \"defaultPaymentToken\": \"ETH\",\r\n  \"processingFeePct\": 1.0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getSplitConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getSplitConfig",
            "properties": {
              "displayName": "Get split configuration for merchant",
              "method": "GET",
              "urlTemplate": "/api/split/deploy",
              "templateParameters": [],
              "description": "Returns the split configuration saved for the merchant (address and recipients). Requires APIM subscription and `split:read` scope.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Split configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "split": {
                              "address": "string",
                              "recipients": [
                                {
                                  "address": "string",
                                  "sharesBps": 0
                                }
                              ]
                            }
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "SplitConfigResponse",
                      "generatedSample": "{\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  }\r\n}",
                      "sample": "{\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  }\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getTaxCatalog",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getTaxCatalog",
            "properties": {
              "displayName": "Get tax catalog (illustrative jurisdictions and rates)",
              "method": "GET",
              "urlTemplate": "/api/tax/catalog",
              "templateParameters": [],
              "description": "Returns curated tax jurisdictions with example rates to bootstrap merchant tax settings. For production-grade accuracy, integrate a certified tax provider (TaxJar/Avalara).\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "country",
                    "description": "Filter by country code (e.g., US, CA, UK, EU, AU, SG, JP)",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiTaxCatalogGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Tax catalog response",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "provider": {
                              "name": "string",
                              "apiKeySet": true
                            },
                            "updatedAt": 0,
                            "jurisdictions": [
                              {
                                "code": "string",
                                "name": "string",
                                "rate": 0.0,
                                "country": "string",
                                "type": "string"
                              }
                            ],
                            "disclaimer": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TaxCatalogResponse",
                      "generatedSample": "{\r\n  \"provider\": {\r\n    \"name\": \"string\",\r\n    \"apiKeySet\": true\r\n  },\r\n  \"updatedAt\": 0,\r\n  \"jurisdictions\": [\r\n    {\r\n      \"code\": \"string\",\r\n      \"name\": \"string\",\r\n      \"rate\": 0.0,\r\n      \"country\": \"string\",\r\n      \"type\": \"string\"\r\n    }\r\n  ],\r\n  \"disclaimer\": \"string\"\r\n}",
                      "sample": "{\r\n  \"provider\": {\r\n    \"name\": \"string\",\r\n    \"apiKeySet\": true\r\n  },\r\n  \"updatedAt\": 0,\r\n  \"jurisdictions\": [\r\n    {\r\n      \"code\": \"string\",\r\n      \"name\": \"string\",\r\n      \"rate\": 0.0,\r\n      \"country\": \"string\",\r\n      \"type\": \"string\"\r\n    }\r\n  ],\r\n  \"disclaimer\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiTaxCatalogGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getBillingBalance",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getBillingBalance",
            "properties": {
              "displayName": "Get user balance (time credits)",
              "method": "GET",
              "urlTemplate": "/api/billing/balance",
              "templateParameters": [],
              "description": "Returns remaining time credits for the authenticated wallet (resolved at gateway). May include plan info if subscribed. Requires APIM subscription. Gracefully degrades to zeros if Cosmos is unavailable.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Balance response",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "balanceSeconds": 0,
                            "purchasedSeconds": 0,
                            "usedSeconds": 0,
                            "unlimited": true,
                            "plan": "basic",
                            "planExpiry": 0,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "BalanceResponse",
                      "generatedSample": "{\r\n  \"balanceSeconds\": 0,\r\n  \"purchasedSeconds\": 0,\r\n  \"usedSeconds\": 0,\r\n  \"unlimited\": true,\r\n  \"plan\": \"basic\",\r\n  \"planExpiry\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"balanceSeconds\": 0,\r\n  \"purchasedSeconds\": 0,\r\n  \"usedSeconds\": 0,\r\n  \"unlimited\": true,\r\n  \"plan\": \"basic\",\r\n  \"planExpiry\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    },
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiBillingBalanceGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/healthz",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "healthz",
            "properties": {
              "displayName": "Health check",
              "method": "GET",
              "urlTemplate": "/healthz",
              "templateParameters": [],
              "description": "Returns 200 with a small JSON payload for health probes. Subscription is not required. Accessible via AFD and APIM; used by AFD origin-group HTTPS probe.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Service is healthy",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "status": "ok"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "HealthzGet200ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"status\": \"ok\"\r\n}",
                      "sample": "{\r\n  \"status\": \"ok\"\r\n}"
                    }
                  ],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/listInventory",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "listInventory",
            "properties": {
              "displayName": "List inventory items",
              "method": "GET",
              "urlTemplate": "/api/inventory",
              "templateParameters": [],
              "description": "List inventory items for the merchant associated with the resolved wallet. Requires APIM subscription and `inventory:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "q",
                    "description": "Search term (name, SKU, description, category, tags)",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest"
                  },
                  {
                    "name": "category",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-1"
                  },
                  {
                    "name": "taxable",
                    "type": "string",
                    "values": [
                      "true",
                      "false",
                      "any"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-2"
                  },
                  {
                    "name": "stock",
                    "type": "string",
                    "values": [
                      "in",
                      "out",
                      "any"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-3"
                  },
                  {
                    "name": "priceMin",
                    "type": "number",
                    "format": "float",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-4"
                  },
                  {
                    "name": "priceMax",
                    "type": "number",
                    "format": "float",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-5"
                  },
                  {
                    "name": "tags",
                    "description": "Comma-separated tags",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-6"
                  },
                  {
                    "name": "tagsMode",
                    "description": "Tag match mode",
                    "type": "string",
                    "values": [
                      "any",
                      "all"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-7"
                  },
                  {
                    "name": "pack",
                    "description": "Industry pack filter",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-8"
                  },
                  {
                    "name": "sort",
                    "type": "string",
                    "defaultValue": "updatedAt",
                    "values": [
                      "name",
                      "sku",
                      "priceUsd",
                      "stockQty",
                      "updatedAt"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-9"
                  },
                  {
                    "name": "order",
                    "type": "string",
                    "defaultValue": "desc",
                    "values": [
                      "asc",
                      "desc"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-10"
                  },
                  {
                    "name": "limit",
                    "type": "integer",
                    "format": "int32",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-11"
                  },
                  {
                    "name": "page",
                    "type": "integer",
                    "format": "int32",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-12"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Inventory list",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "items": [
                              {
                                "id": "string",
                                "wallet": "string",
                                "sku": "string",
                                "name": "string",
                                "priceUsd": 0.0,
                                "currency": "string",
                                "stockQty": 0,
                                "category": "string",
                                "description": "string",
                                "tags": [
                                  "string"
                                ],
                                "images": [
                                  "string"
                                ],
                                "attributes": {},
                                "costUsd": 0.0,
                                "taxable": true,
                                "jurisdictionCode": "string",
                                "industryPack": "string",
                                "createdAt": 0,
                                "updatedAt": 0
                              }
                            ],
                            "total": 0,
                            "page": 0,
                            "pageSize": 0,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "InventoryListResponse",
                      "generatedSample": "{\r\n  \"items\": [\r\n    {\r\n      \"id\": \"string\",\r\n      \"wallet\": \"string\",\r\n      \"sku\": \"string\",\r\n      \"name\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"currency\": \"string\",\r\n      \"stockQty\": 0,\r\n      \"category\": \"string\",\r\n      \"description\": \"string\",\r\n      \"tags\": [\r\n        \"string\"\r\n      ],\r\n      \"images\": [\r\n        \"string\"\r\n      ],\r\n      \"attributes\": {},\r\n      \"costUsd\": 0.0,\r\n      \"taxable\": true,\r\n      \"jurisdictionCode\": \"string\",\r\n      \"industryPack\": \"string\",\r\n      \"createdAt\": 0,\r\n      \"updatedAt\": 0\r\n    }\r\n  ],\r\n  \"total\": 0,\r\n  \"page\": 0,\r\n  \"pageSize\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"items\": [\r\n    {\r\n      \"id\": \"string\",\r\n      \"wallet\": \"string\",\r\n      \"sku\": \"string\",\r\n      \"name\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"currency\": \"string\",\r\n      \"stockQty\": 0,\r\n      \"category\": \"string\",\r\n      \"description\": \"string\",\r\n      \"tags\": [\r\n        \"string\"\r\n      ],\r\n      \"images\": [\r\n        \"string\"\r\n      ],\r\n      \"attributes\": {},\r\n      \"costUsd\": 0.0,\r\n      \"taxable\": true,\r\n      \"jurisdictionCode\": \"string\",\r\n      \"industryPack\": \"string\",\r\n      \"createdAt\": 0,\r\n      \"updatedAt\": 0\r\n    }\r\n  ],\r\n  \"total\": 0,\r\n  \"page\": 0,\r\n  \"pageSize\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/listReceipts",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "listReceipts",
            "properties": {
              "displayName": "List receipts",
              "method": "GET",
              "urlTemplate": "/api/receipts",
              "templateParameters": [],
              "description": "List recent receipts for the merchant associated with the resolved wallet. Requires APIM subscription and `receipts:read` scope. Gracefully degrades to in-memory when Cosmos is unavailable.\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "limit",
                    "description": "Number of receipts to return (default 100, max 200)",
                    "type": "integer",
                    "format": "int32",
                    "defaultValue": "100",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiReceiptsGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Recent receipts",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "receipts": [
                              {
                                "receiptId": "R-123456",
                                "totalUsd": 13.09,
                                "currency": "USD",
                                "lineItems": [
                                  {
                                    "label": "Espresso",
                                    "priceUsd": 7.0,
                                    "qty": 2
                                  },
                                  {
                                    "label": "Tax",
                                    "priceUsd": 1.09
                                  },
                                  {
                                    "label": "Processing Fee",
                                    "priceUsd": 0.5
                                  }
                                ],
                                "createdAt": 1698765432000,
                                "brandName": "PortalPay",
                                "status": "paid"
                              }
                            ]
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsGet200ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"receipts\": [\r\n    {\r\n      \"receiptId\": \"R-123456\",\r\n      \"totalUsd\": 13.09,\r\n      \"currency\": \"USD\",\r\n      \"lineItems\": [\r\n        {\r\n          \"label\": \"Espresso\",\r\n          \"priceUsd\": 7.0,\r\n          \"qty\": 2\r\n        },\r\n        {\r\n          \"label\": \"Tax\",\r\n          \"priceUsd\": 1.09\r\n        },\r\n        {\r\n          \"label\": \"Processing Fee\",\r\n          \"priceUsd\": 0.5\r\n        }\r\n      ],\r\n      \"createdAt\": 1698765432000,\r\n      \"brandName\": \"PortalPay\",\r\n      \"status\": \"paid\"\r\n    }\r\n  ]\r\n}",
                      "sample": "{\r\n  \"receipts\": [\r\n    {\r\n      \"receiptId\": \"R-123456\",\r\n      \"totalUsd\": 13.09,\r\n      \"currency\": \"USD\",\r\n      \"lineItems\": [\r\n        {\r\n          \"label\": \"Espresso\",\r\n          \"priceUsd\": 7.0,\r\n          \"qty\": 2\r\n        },\r\n        {\r\n          \"label\": \"Tax\",\r\n          \"priceUsd\": 1.09\r\n        },\r\n        {\r\n          \"label\": \"Processing Fee\",\r\n          \"priceUsd\": 0.5\r\n        }\r\n      ],\r\n      \"createdAt\": 1698765432000,\r\n      \"brandName\": \"PortalPay\",\r\n      \"status\": \"paid\"\r\n    }\r\n  ]\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/listSplitTransactions",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "listSplitTransactions",
            "properties": {
              "displayName": "List split transactions (if configured)",
              "method": "GET",
              "urlTemplate": "/api/split/transactions",
              "templateParameters": [],
              "description": "Returns transactions indexed by the split indexer. Availability varies by deployment. Requires APIM subscription and `split:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "address",
                    "description": "Optional filter by recipient/split address",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiSplitTransactionsGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Array of transactions",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": [
                            {
                              "id": "txn_abc",
                              "receiptId": "rcpt_12345",
                              "amount": 27.0,
                              "currency": "USDC",
                              "status": "completed",
                              "timestamp": "2025-01-01T12:00:00Z",
                              "transactionHash": "0x...",
                              "fees": 0.2
                            }
                          ]
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitTransactionsGet200ApplicationJsonResponse",
                      "generatedSample": "[\r\n  {\r\n    \"id\": \"txn_abc\",\r\n    \"receiptId\": \"rcpt_12345\",\r\n    \"amount\": 27.0,\r\n    \"currency\": \"USDC\",\r\n    \"status\": \"completed\",\r\n    \"timestamp\": \"2025-01-01T12:00:00\",\r\n    \"transactionHash\": \"0x...\",\r\n    \"fees\": 0.2\r\n  }\r\n]",
                      "sample": "[\r\n  {\r\n    \"id\": \"txn_abc\",\r\n    \"receiptId\": \"rcpt_12345\",\r\n    \"amount\": 27.0,\r\n    \"currency\": \"USDC\",\r\n    \"status\": \"completed\",\r\n    \"timestamp\": \"2025-01-01T12:00:00\",\r\n    \"transactionHash\": \"0x...\",\r\n    \"fees\": 0.2\r\n  }\r\n]"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postReceiptRefund",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postReceiptRefund",
            "properties": {
              "displayName": "Log a refund for a receipt (merchant/admin via portal)",
              "method": "POST",
              "urlTemplate": "/api/receipts/refund",
              "templateParameters": [],
              "description": "Logs a refund entry for a receipt and updates status history. Requires JWT and CSRF via portal UI. APIM developers typically do not call this directly; included for completeness of public surface.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "receiptId": "string",
                          "wallet": "string",
                          "buyer": "string",
                          "usd": 0.0,
                          "items": [
                            {
                              "label": "string",
                              "priceUsd": 0.0,
                              "qty": 0
                            }
                          ],
                          "txHash": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ReceiptRefundRequest",
                    "generatedSample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"buyer\": \"string\",\r\n  \"usd\": 0.0,\r\n  \"items\": [\r\n    {\r\n      \"label\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"qty\": 0\r\n    }\r\n  ],\r\n  \"txHash\": \"string\"\r\n}",
                    "sample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"buyer\": \"string\",\r\n  \"usd\": 0.0,\r\n  \"items\": [\r\n    {\r\n      \"label\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"qty\": 0\r\n    }\r\n  ],\r\n  \"txHash\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Refund logged",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "OkResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsRefundPost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "missing_receipt_id or invalid_wallet or invalid_buyer or invalid_usd",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReserveRecommendation",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReserveRecommendation",
            "properties": {
              "displayName": "Recommend settlement token and frequency",
              "method": "GET",
              "urlTemplate": "/api/reserve/recommend",
              "templateParameters": [],
              "description": "Recommends which token to settle with and how frequently based on target reserve ratios vs current balances. Considers optional upcoming receipt amount.\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "receiptUsd",
                    "description": "Optional upcoming payment amount to consider",
                    "type": "number",
                    "format": "float",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiReserveRecommendGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Recommendation",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "recommendedToken": "USDC",
                            "frequency": 0,
                            "deficitFraction": 0.0,
                            "maxDeficit": 0.0,
                            "totalUsd": 0.0,
                            "futureTotal": 0.0,
                            "targets": {},
                            "currentUsd": {},
                            "deficits": {}
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReserveRecommendationResponse",
                      "generatedSample": "{\r\n  \"recommendedToken\": \"USDC\",\r\n  \"frequency\": 0,\r\n  \"deficitFraction\": 0.0,\r\n  \"maxDeficit\": 0.0,\r\n  \"totalUsd\": 0.0,\r\n  \"futureTotal\": 0.0,\r\n  \"targets\": {},\r\n  \"currentUsd\": {},\r\n  \"deficits\": {}\r\n}",
                      "sample": "{\r\n  \"recommendedToken\": \"USDC\",\r\n  \"frequency\": 0,\r\n  \"deficitFraction\": 0.0,\r\n  \"maxDeficit\": 0.0,\r\n  \"totalUsd\": 0.0,\r\n  \"futureTotal\": 0.0,\r\n  \"targets\": {},\r\n  \"currentUsd\": {},\r\n  \"deficits\": {}\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReserveRecommendGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "recommendation_failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postBillingPurchase",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postBillingPurchase",
            "properties": {
              "displayName": "Record a purchase/payment event",
              "method": "POST",
              "urlTemplate": "/api/billing/purchase",
              "templateParameters": [],
              "description": "Records a purchase tied to a merchant recipient and updates receipt status lifecycle. Validates optional on-chain transaction recipient. Triggers split indexing when applicable. Requires APIM subscription. Wallet is resolved via gateway/JWT or provided header/body in non-prod.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "wallet": "string",
                          "seconds": 0,
                          "usd": 0.0,
                          "eth": 0.0,
                          "txHash": "string",
                          "idempotencyKey": "string",
                          "recipient": "string",
                          "receiptId": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "BillingPurchaseRequest",
                    "generatedSample": "{\r\n  \"wallet\": \"string\",\r\n  \"seconds\": 0,\r\n  \"usd\": 0.0,\r\n  \"eth\": 0.0,\r\n  \"txHash\": \"string\",\r\n  \"idempotencyKey\": \"string\",\r\n  \"recipient\": \"string\",\r\n  \"receiptId\": \"string\"\r\n}",
                    "sample": "{\r\n  \"wallet\": \"string\",\r\n  \"seconds\": 0,\r\n  \"usd\": 0.0,\r\n  \"eth\": 0.0,\r\n  \"txHash\": \"string\",\r\n  \"idempotencyKey\": \"string\",\r\n  \"recipient\": \"string\",\r\n  \"receiptId\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Purchase recorded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "event": {
                              "id": "string",
                              "type": "purchase",
                              "wallet": "string",
                              "seconds": 0,
                              "usd": 0.0,
                              "eth": 0.0,
                              "txHash": "string",
                              "recipient": "string",
                              "receiptId": "string",
                              "portalFeePct": 0.0,
                              "portalFeeRecipient": "string",
                              "portalFeeUsd": 0.0,
                              "ts": 0
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "BillingPurchaseResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"event\": {\r\n    \"id\": \"string\",\r\n    \"type\": \"purchase\",\r\n    \"wallet\": \"string\",\r\n    \"seconds\": 0,\r\n    \"usd\": 0.0,\r\n    \"eth\": 0.0,\r\n    \"txHash\": \"string\",\r\n    \"recipient\": \"string\",\r\n    \"receiptId\": \"string\",\r\n    \"portalFeePct\": 0.0,\r\n    \"portalFeeRecipient\": \"string\",\r\n    \"portalFeeUsd\": 0.0,\r\n    \"ts\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"event\": {\r\n    \"id\": \"string\",\r\n    \"type\": \"purchase\",\r\n    \"wallet\": \"string\",\r\n    \"seconds\": 0,\r\n    \"usd\": 0.0,\r\n    \"eth\": 0.0,\r\n    \"txHash\": \"string\",\r\n    \"recipient\": \"string\",\r\n    \"receiptId\": \"string\",\r\n    \"portalFeePct\": 0.0,\r\n    \"portalFeeRecipient\": \"string\",\r\n    \"portalFeeUsd\": 0.0,\r\n    \"ts\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    },
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiBillingPurchasePost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "invalid wallet or invalid seconds or merchant_required or tx_mismatch",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "Server error",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/upsertPricingConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "upsertPricingConfig",
            "properties": {
              "displayName": "Update pricing configuration (owner-only JWT; APIM writes not permitted)",
              "method": "POST",
              "urlTemplate": "/api/pricing/config",
              "templateParameters": [],
              "description": "Updates pricing configuration. Admin-only via JWT and CSRF; APIM dev subscriptions cannot write. Included for completeness; not accessible via public developer subscription.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "ethPer2Min": 0.0,
                          "minMinutes": 0,
                          "discountRules": [
                            {
                              "minMinutes": 0,
                              "discountPct": 0.0
                            }
                          ]
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "PricingConfigUpsertRequest",
                    "generatedSample": "{\r\n  \"ethPer2Min\": 0.0,\r\n  \"minMinutes\": 0,\r\n  \"discountRules\": [\r\n    {\r\n      \"minMinutes\": 0,\r\n      \"discountPct\": 0.0\r\n    }\r\n  ]\r\n}",
                    "sample": "{\r\n  \"ethPer2Min\": 0.0,\r\n  \"minMinutes\": 0,\r\n  \"discountRules\": [\r\n    {\r\n      \"minMinutes\": 0,\r\n      \"discountPct\": 0.0\r\n    }\r\n  ]\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Updated pricing configuration (or degraded fallback)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "config": {
                              "ethPer2Min": 0.0,
                              "minMinutes": 0,
                              "discountRules": [
                                {
                                  "minMinutes": 0,
                                  "discountPct": 0.0
                                }
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "PricingConfigUpsertResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 400,
                  "description": "invalid_rate",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postReceiptStatus",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postReceiptStatus",
            "properties": {
              "displayName": "Update receipt status (tracking and sensitive events)",
              "method": "POST",
              "urlTemplate": "/api/receipts/status",
              "templateParameters": [],
              "description": "Updates receipt status timeline. Certain tracking statuses may be allowed without JWT (e.g. link_opened, buyer_logged_in, checkout_initialized). Sensitive updates (e.g. checkout_success, refund_*) require JWT and CSRF via the portal UI; APIM developer subscriptions typically use tracking statuses.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "receiptId": "string",
                          "wallet": "string",
                          "status": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ReceiptStatusUpdateRequest",
                    "generatedSample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"status\": \"string\"\r\n}",
                    "sample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"status\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Status update result",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "OkResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsStatusPost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "missing_receipt_id or invalid_wallet or missing_status",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          }
        ]
      }
    },
    "portalpay-enterprise": {
      "apis": [
        {
          "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/products/portalpay-enterprise/apis/portalpay-api",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "portalpay-api",
          "properties": {
            "displayName": "PortalPay API",
            "apiRevision": "1",
            "description": "Public API surface for PortalPay under a hardened posture: Azure Front Door Premium (AFD) gateway \u00e2\u2020\u2019 Azure API Management (APIM).\nAll developer-facing endpoints require an APIM subscription key header `Ocp-Apim-Subscription-Key` and must traverse AFD.\nOrigin enforcement: AFD injects an internal header `x-edge-secret`; APIM inbound policy validates it and may reject direct-origin requests with 403.\nWallet identity is resolved at the gateway and injected to the backend via `x-resolved-wallet`; client-supplied `x-wallet` header and `wallet` parameters are ignored.\nHealth endpoint: `GET /healthz` returns 200 JSON for probes; does not require a subscription.\nNote: Some endpoints are read-only or environment-gated in production. Admin/sensitive routes (JWT-only) are not part of this spec.\n",
            "specificationLastUpdated": "2025-10-30T19:12:55.2966667Z",
            "subscriptionRequired": true,
            "serviceUrl": "https://payportal.azurewebsites.net",
            "backendId": null,
            "path": "portalpay",
            "protocols": [
              "https"
            ],
            "mcpProperties": null,
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true
          }
        }
      ],
      "operations": {
        "portalpay-api": [
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/upsertSplitConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "upsertSplitConfig",
            "properties": {
              "displayName": "Configure split (admin-only JWT; APIM writes not permitted)",
              "method": "POST",
              "urlTemplate": "/api/split/deploy",
              "templateParameters": [],
              "description": "Idempotently persists split address and recipients for a merchant. Admin-only via JWT and CSRF. APIM developer subscriptions cannot perform this write.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "splitAddress": "string",
                          "recipients": [
                            {
                              "address": "string",
                              "sharesBps": 0
                            }
                          ]
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "SplitConfigUpsertRequest",
                    "generatedSample": "{\r\n  \"splitAddress\": \"string\",\r\n  \"recipients\": [\r\n    {\r\n      \"address\": \"string\",\r\n      \"sharesBps\": 0\r\n    }\r\n  ]\r\n}",
                    "sample": "{\r\n  \"splitAddress\": \"string\",\r\n  \"recipients\": [\r\n    {\r\n      \"address\": \"string\",\r\n      \"sharesBps\": 0\r\n    }\r\n  ]\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Split configuration result",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "split": {
                              "address": "string",
                              "recipients": [
                                {
                                  "address": "string",
                                  "sharesBps": 0
                                }
                              ]
                            },
                            "idempotent": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "SplitConfigUpsertResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  },\r\n  \"idempotent\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  },\r\n  \"idempotent\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/createReceipt",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "createReceipt",
            "properties": {
              "displayName": "Create a receipt payload for a QR-code payment portal",
              "method": "POST",
              "urlTemplate": "/api/receipts",
              "templateParameters": [],
              "description": "Create an itemized receipt used by the payment portal. The portal URL can be QR-encoded and printed on POS receipts. Requires APIM subscription and `receipts:write` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "id": "rcpt_12345",
                          "lineItems": [
                            {
                              "label": "Sample Item",
                              "priceUsd": 25.0
                            },
                            {
                              "label": "Tax",
                              "priceUsd": 2.0
                            }
                          ],
                          "totalUsd": 27.0
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "CreateReceiptRequest",
                    "generatedSample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"totalUsd\": 27.0\r\n}",
                    "sample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"totalUsd\": 27.0\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 201,
                  "description": "Receipt created",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "id": "rcpt_12345",
                            "paymentUrl": "https://pay.ledger1.ai/pay/rcpt_12345",
                            "status": "pending"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "CreateReceiptResponse",
                      "generatedSample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"paymentUrl\": \"https://pay.ledger1.ai/pay/rcpt_12345\",\r\n  \"status\": \"pending\"\r\n}",
                      "sample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"paymentUrl\": \"https://pay.ledger1.ai/pay/rcpt_12345\",\r\n  \"status\": \"pending\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "Invalid request",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "Server error",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/upsertInventory",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "upsertInventory",
            "properties": {
              "displayName": "Create or update an inventory item",
              "method": "POST",
              "urlTemplate": "/api/inventory",
              "templateParameters": [],
              "description": "Upsert (create/update) an inventory item. Requires APIM subscription and `inventory:write` scope. Ownership/admin is enforced for JWT callers; APIM callers are bound to their subscription wallet.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "id": "string",
                          "sku": "string",
                          "name": "string",
                          "priceUsd": 0.0,
                          "stockQty": 0,
                          "currency": "string",
                          "category": "string",
                          "description": "string",
                          "tags": [
                            "string"
                          ],
                          "images": [
                            "string"
                          ],
                          "attributes": {},
                          "costUsd": 0.0,
                          "taxable": true,
                          "jurisdictionCode": "string",
                          "industryPack": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "InventoryUpsertRequest",
                    "generatedSample": "{\r\n  \"id\": \"string\",\r\n  \"sku\": \"string\",\r\n  \"name\": \"string\",\r\n  \"priceUsd\": 0.0,\r\n  \"stockQty\": 0,\r\n  \"currency\": \"string\",\r\n  \"category\": \"string\",\r\n  \"description\": \"string\",\r\n  \"tags\": [\r\n    \"string\"\r\n  ],\r\n  \"images\": [\r\n    \"string\"\r\n  ],\r\n  \"attributes\": {},\r\n  \"costUsd\": 0.0,\r\n  \"taxable\": true,\r\n  \"jurisdictionCode\": \"string\",\r\n  \"industryPack\": \"string\"\r\n}",
                    "sample": "{\r\n  \"id\": \"string\",\r\n  \"sku\": \"string\",\r\n  \"name\": \"string\",\r\n  \"priceUsd\": 0.0,\r\n  \"stockQty\": 0,\r\n  \"currency\": \"string\",\r\n  \"category\": \"string\",\r\n  \"description\": \"string\",\r\n  \"tags\": [\r\n    \"string\"\r\n  ],\r\n  \"images\": [\r\n    \"string\"\r\n  ],\r\n  \"attributes\": {},\r\n  \"costUsd\": 0.0,\r\n  \"taxable\": true,\r\n  \"jurisdictionCode\": \"string\",\r\n  \"industryPack\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Upserted item",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "item": {
                              "id": "string",
                              "wallet": "string",
                              "sku": "string",
                              "name": "string",
                              "priceUsd": 0.0,
                              "currency": "string",
                              "stockQty": 0,
                              "category": "string",
                              "description": "string",
                              "tags": [
                                "string"
                              ],
                              "images": [
                                "string"
                              ],
                              "attributes": {},
                              "costUsd": 0.0,
                              "taxable": true,
                              "jurisdictionCode": "string",
                              "industryPack": "string",
                              "createdAt": 0,
                              "updatedAt": 0
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "InventoryUpsertResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"item\": {\r\n    \"id\": \"string\",\r\n    \"wallet\": \"string\",\r\n    \"sku\": \"string\",\r\n    \"name\": \"string\",\r\n    \"priceUsd\": 0.0,\r\n    \"currency\": \"string\",\r\n    \"stockQty\": 0,\r\n    \"category\": \"string\",\r\n    \"description\": \"string\",\r\n    \"tags\": [\r\n      \"string\"\r\n    ],\r\n    \"images\": [\r\n      \"string\"\r\n    ],\r\n    \"attributes\": {},\r\n    \"costUsd\": 0.0,\r\n    \"taxable\": true,\r\n    \"jurisdictionCode\": \"string\",\r\n    \"industryPack\": \"string\",\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"item\": {\r\n    \"id\": \"string\",\r\n    \"wallet\": \"string\",\r\n    \"sku\": \"string\",\r\n    \"name\": \"string\",\r\n    \"priceUsd\": 0.0,\r\n    \"currency\": \"string\",\r\n    \"stockQty\": 0,\r\n    \"category\": \"string\",\r\n    \"description\": \"string\",\r\n    \"tags\": [\r\n      \"string\"\r\n    ],\r\n    \"images\": [\r\n      \"string\"\r\n    ],\r\n    \"attributes\": {},\r\n    \"costUsd\": 0.0,\r\n    \"taxable\": true,\r\n    \"jurisdictionCode\": \"string\",\r\n    \"industryPack\": \"string\",\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "Invalid input",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/deleteInventory",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "deleteInventory",
            "properties": {
              "displayName": "Delete an inventory item",
              "method": "DELETE",
              "urlTemplate": "/api/inventory?id={id}",
              "templateParameters": [
                {
                  "name": "id",
                  "description": "Inventory item ID",
                  "type": "string",
                  "required": true,
                  "values": [],
                  "schemaId": "6902f7d667ce42094c8688d9",
                  "typeName": "ApiInventoryDeleteRequest"
                }
              ],
              "description": "Delete an inventory item by ID. Requires APIM subscription and `inventory:write` scope.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Delete result",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "DeleteInventoryResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "id_required",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postSplitWithdrawDeprecated",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postSplitWithdrawDeprecated",
            "properties": {
              "displayName": "Deprecated: server-side split withdraw",
              "method": "POST",
              "urlTemplate": "/api/split/withdraw",
              "templateParameters": [],
              "description": "Deprecated in favor of client-side `PaymentSplitter.release` via connected wallet.\nThis endpoint returns 410 Gone and should not be used.\n",
              "responses": [
                {
                  "statusCode": 204,
                  "description": "Deprecated endpoint; returns no content",
                  "representations": [],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitWithdrawPost204x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 410,
                  "description": "Deprecated endpoint; use connected wallet",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "deprecated",
                            "reason": "use_connected_wallet",
                            "message": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitWithdrawPost410ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"error\": \"deprecated\",\r\n  \"reason\": \"use_connected_wallet\",\r\n  \"message\": \"string\"\r\n}",
                      "sample": "{\r\n  \"error\": \"deprecated\",\r\n  \"reason\": \"use_connected_wallet\",\r\n  \"message\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitWithdrawPost410x-correlation-idResponseHeader"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postReceiptTerminal",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postReceiptTerminal",
            "properties": {
              "displayName": "Generate a terminal receipt (single item + tax/fees)",
              "method": "POST",
              "urlTemplate": "/api/receipts/terminal",
              "templateParameters": [],
              "description": "Creates a receipt from a terminal input amount, applies tax and processing fees, and persists. Requires APIM subscription; merchant wallet provided via header `x-wallet` or query param `wallet`.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "amountUsd": 0.0,
                          "label": "string",
                          "currency": "string",
                          "jurisdictionCode": "string",
                          "taxRate": 0.0,
                          "taxComponents": [
                            "string"
                          ]
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ReceiptTerminalCreateRequest",
                    "generatedSample": "{\r\n  \"amountUsd\": 0.0,\r\n  \"label\": \"string\",\r\n  \"currency\": \"string\",\r\n  \"jurisdictionCode\": \"string\",\r\n  \"taxRate\": 0.0,\r\n  \"taxComponents\": [\r\n    \"string\"\r\n  ]\r\n}",
                    "sample": "{\r\n  \"amountUsd\": 0.0,\r\n  \"label\": \"string\",\r\n  \"currency\": \"string\",\r\n  \"jurisdictionCode\": \"string\",\r\n  \"taxRate\": 0.0,\r\n  \"taxComponents\": [\r\n    \"string\"\r\n  ]\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Terminal receipt generated",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "receipt": {
                              "receiptId": "string",
                              "totalUsd": 0.0,
                              "currency": "USD",
                              "lineItems": [
                                {
                                  "label": "string",
                                  "priceUsd": 0.0,
                                  "qty": 0,
                                  "thumb": "string",
                                  "itemId": "string",
                                  "sku": "string"
                                }
                              ],
                              "createdAt": 0,
                              "brandName": "string",
                              "status": "generated",
                              "jurisdictionCode": "string",
                              "taxRate": 0.0,
                              "taxComponents": [
                                "string"
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReceiptTerminalCreateResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsTerminalPost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "wallet_required or invalid_amount",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "split_required (Split contract not configured)",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/createOrder",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "createOrder",
            "properties": {
              "displayName": "Generate an order/receipt from inventory",
              "method": "POST",
              "urlTemplate": "/api/orders",
              "templateParameters": [],
              "description": "Generate an itemized receipt from inventory items with automatic tax computation and processing fee. Requires APIM subscription and `orders:create` scope. Split contract must be configured for the merchant.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "items": [
                            {
                              "sku": "COFFEE-001",
                              "qty": 2
                            },
                            {
                              "sku": "PASTRY-001",
                              "qty": 1
                            }
                          ],
                          "jurisdictionCode": "US-CA"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "OrderCreateRequest",
                    "generatedSample": "{\r\n  \"items\": [\r\n    {\r\n      \"sku\": \"COFFEE-001\",\r\n      \"qty\": 2\r\n    },\r\n    {\r\n      \"sku\": \"PASTRY-001\",\r\n      \"qty\": 1\r\n    }\r\n  ],\r\n  \"jurisdictionCode\": \"US-CA\"\r\n}",
                    "sample": "{\r\n  \"items\": [\r\n    {\r\n      \"sku\": \"COFFEE-001\",\r\n      \"qty\": 2\r\n    },\r\n    {\r\n      \"sku\": \"PASTRY-001\",\r\n      \"qty\": 1\r\n    }\r\n  ],\r\n  \"jurisdictionCode\": \"US-CA\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Receipt generated",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "receipt": {
                              "receiptId": "string",
                              "totalUsd": 0.0,
                              "currency": "USD",
                              "lineItems": [
                                {
                                  "label": "string",
                                  "priceUsd": 0.0,
                                  "qty": 0,
                                  "thumb": "string",
                                  "itemId": "string",
                                  "sku": "string"
                                }
                              ],
                              "createdAt": 0,
                              "brandName": "string",
                              "status": "generated",
                              "jurisdictionCode": "string",
                              "taxRate": 0.0,
                              "taxComponents": [
                                "string"
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "OrderCreateResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"receipt\": {\r\n    \"receiptId\": \"string\",\r\n    \"totalUsd\": 0.0,\r\n    \"currency\": \"USD\",\r\n    \"lineItems\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"priceUsd\": 0.0,\r\n        \"qty\": 0,\r\n        \"thumb\": \"string\",\r\n        \"itemId\": \"string\",\r\n        \"sku\": \"string\"\r\n      }\r\n    ],\r\n    \"createdAt\": 0,\r\n    \"brandName\": \"string\",\r\n    \"status\": \"generated\",\r\n    \"jurisdictionCode\": \"string\",\r\n    \"taxRate\": 0.0,\r\n    \"taxComponents\": [\r\n      \"string\"\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "items_required or inventory_item_not_found",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "split_required or forbidden",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "string",
                            "message": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiOrdersPost403ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"error\": \"string\",\r\n  \"message\": \"string\"\r\n}",
                      "sample": "{\r\n  \"error\": \"string\",\r\n  \"message\": \"string\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReceipt",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReceipt",
            "properties": {
              "displayName": "Get a receipt by ID",
              "method": "GET",
              "urlTemplate": "/api/receipts/{id}",
              "templateParameters": [
                {
                  "name": "id",
                  "description": "Receipt ID",
                  "type": "string",
                  "required": true,
                  "values": [],
                  "schemaId": "6902f7d667ce42094c8688d9",
                  "typeName": "ApiReceipts-id-GetRequest"
                }
              ],
              "description": "Requires APIM subscription and `receipts:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Receipt found",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "receiptId": "rcpt_12345",
                            "totalUsd": 27.0,
                            "currency": "USD",
                            "lineItems": [
                              {
                                "label": "Sample Item",
                                "priceUsd": 25.0
                              },
                              {
                                "label": "Tax",
                                "priceUsd": 2.0
                              }
                            ],
                            "createdAt": 1698765432000
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Receipt",
                      "generatedSample": "{\r\n  \"receiptId\": \"rcpt_12345\",\r\n  \"totalUsd\": 27.0,\r\n  \"currency\": \"USD\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"createdAt\": 1698765432000\r\n}",
                      "sample": "{\r\n  \"receiptId\": \"rcpt_12345\",\r\n  \"totalUsd\": 27.0,\r\n  \"currency\": \"USD\",\r\n  \"lineItems\": [\r\n    {\r\n      \"label\": \"Sample Item\",\r\n      \"priceUsd\": 25.0\r\n    },\r\n    {\r\n      \"label\": \"Tax\",\r\n      \"priceUsd\": 2.0\r\n    }\r\n  ],\r\n  \"createdAt\": 1698765432000\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 404,
                  "description": "Not found",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getShopConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getShopConfig",
            "properties": {
              "displayName": "Get merchant shop configuration",
              "method": "GET",
              "urlTemplate": "/api/shop/config",
              "templateParameters": [],
              "description": "Returns merchant shop configuration (branding, layout, tax defaults). Requires APIM subscription and `shop:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Shop configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "config": {
                              "name": "string",
                              "description": "string",
                              "bio": "string",
                              "theme": {
                                "primaryColor": "string",
                                "secondaryColor": "string",
                                "textColor": "string",
                                "accentColor": "string",
                                "brandLogoUrl": "string",
                                "coverPhotoUrl": "string",
                                "fontFamily": "string",
                                "logoShape": "square",
                                "heroFontSize": "microtext"
                              },
                              "arrangement": "grid",
                              "xpPerDollar": 0.0,
                              "slug": "string",
                              "links": [
                                {
                                  "label": "string",
                                  "url": "string"
                                }
                              ],
                              "industryPack": "restaurant",
                              "industryPackActivatedAt": 0,
                              "setupComplete": true,
                              "createdAt": 0,
                              "updatedAt": 0
                            }
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiShopConfigGet200ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"config\": {\r\n    \"name\": \"string\",\r\n    \"description\": \"string\",\r\n    \"bio\": \"string\",\r\n    \"theme\": {\r\n      \"primaryColor\": \"string\",\r\n      \"secondaryColor\": \"string\",\r\n      \"textColor\": \"string\",\r\n      \"accentColor\": \"string\",\r\n      \"brandLogoUrl\": \"string\",\r\n      \"coverPhotoUrl\": \"string\",\r\n      \"fontFamily\": \"string\",\r\n      \"logoShape\": \"square\",\r\n      \"heroFontSize\": \"microtext\"\r\n    },\r\n    \"arrangement\": \"grid\",\r\n    \"xpPerDollar\": 0.0,\r\n    \"slug\": \"string\",\r\n    \"links\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"url\": \"string\"\r\n      }\r\n    ],\r\n    \"industryPack\": \"restaurant\",\r\n    \"industryPackActivatedAt\": 0,\r\n    \"setupComplete\": true,\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  }\r\n}",
                      "sample": "{\r\n  \"config\": {\r\n    \"name\": \"string\",\r\n    \"description\": \"string\",\r\n    \"bio\": \"string\",\r\n    \"theme\": {\r\n      \"primaryColor\": \"string\",\r\n      \"secondaryColor\": \"string\",\r\n      \"textColor\": \"string\",\r\n      \"accentColor\": \"string\",\r\n      \"brandLogoUrl\": \"string\",\r\n      \"coverPhotoUrl\": \"string\",\r\n      \"fontFamily\": \"string\",\r\n      \"logoShape\": \"square\",\r\n      \"heroFontSize\": \"microtext\"\r\n    },\r\n    \"arrangement\": \"grid\",\r\n    \"xpPerDollar\": 0.0,\r\n    \"slug\": \"string\",\r\n    \"links\": [\r\n      {\r\n        \"label\": \"string\",\r\n        \"url\": \"string\"\r\n      }\r\n    ],\r\n    \"industryPack\": \"restaurant\",\r\n    \"industryPackActivatedAt\": 0,\r\n    \"setupComplete\": true,\r\n    \"createdAt\": 0,\r\n    \"updatedAt\": 0\r\n  }\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getPricingConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getPricingConfig",
            "properties": {
              "displayName": "Get pricing configuration",
              "method": "GET",
              "urlTemplate": "/api/pricing/config",
              "templateParameters": [],
              "description": "Returns pricing defaults (rate per 2 minutes, minimum minutes, discount rules). Requires APIM subscription. Gracefully degrades to defaults if Cosmos is unavailable.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Pricing configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "config": {
                              "ethPer2Min": 0.0,
                              "minMinutes": 0,
                              "discountRules": [
                                {
                                  "minMinutes": 0,
                                  "discountPct": 0.0
                                }
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "PricingConfigResponse",
                      "generatedSample": "{\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReceiptStatus",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReceiptStatus",
            "properties": {
              "displayName": "Get receipt/payment status",
              "method": "GET",
              "urlTemplate": "/api/receipts/status?receiptId={receiptId}",
              "templateParameters": [
                {
                  "name": "receiptId",
                  "description": "Receipt ID to check",
                  "type": "string",
                  "required": true,
                  "values": [],
                  "schemaId": "6902f7d667ce42094c8688d9",
                  "typeName": "ApiReceiptsStatusGetRequest"
                }
              ],
              "description": "Requires APIM subscription and `receipts:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Status payload",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "id": "rcpt_12345",
                            "status": "completed",
                            "transactionHash": "0xabc123...",
                            "currency": "USDC",
                            "amount": 27
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReceiptStatus",
                      "generatedSample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"status\": \"completed\",\r\n  \"transactionHash\": \"0xabc123...\",\r\n  \"currency\": \"USDC\",\r\n  \"amount\": 27\r\n}",
                      "sample": "{\r\n  \"id\": \"rcpt_12345\",\r\n  \"status\": \"completed\",\r\n  \"transactionHash\": \"0xabc123...\",\r\n  \"currency\": \"USDC\",\r\n  \"amount\": 27\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 404,
                  "description": "Not found",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReserveBalances",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReserveBalances",
            "properties": {
              "displayName": "Get reserve balances for merchant or owner wallet",
              "method": "GET",
              "urlTemplate": "/api/reserve/balances",
              "templateParameters": [],
              "description": "Returns live balances across ETH, USDC, USDT, cbBTC, cbXRP with USD conversions and indexed split metrics. Requires APIM subscription. Wallet resolved via header `x-wallet`, query `wallet`, or environment default.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Reserve balances",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "merchantWallet": "string",
                            "sourceWallet": "string",
                            "splitAddressUsed": "string",
                            "balances": {
                              "ETH": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "USDC": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "USDT": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "cbBTC": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              },
                              "cbXRP": {
                                "units": 0.0,
                                "usd": 0.0,
                                "decimals": 0,
                                "address": "string"
                              }
                            },
                            "rates": {
                              "ETH_USD": 0.0,
                              "BTC_USD": 0.0,
                              "XRP_USD": 0.0
                            },
                            "totalUsd": 0.0,
                            "indexedMetrics": {
                              "totalVolumeUsd": 0.0,
                              "merchantEarnedUsd": 0.0,
                              "platformFeeUsd": 0.0,
                              "customers": 0,
                              "totalCustomerXp": 0,
                              "transactionCount": 0
                            }
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReserveBalancesResponse",
                      "generatedSample": "{\r\n  \"merchantWallet\": \"string\",\r\n  \"sourceWallet\": \"string\",\r\n  \"splitAddressUsed\": \"string\",\r\n  \"balances\": {\r\n    \"ETH\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDT\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbBTC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbXRP\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    }\r\n  },\r\n  \"rates\": {\r\n    \"ETH_USD\": 0.0,\r\n    \"BTC_USD\": 0.0,\r\n    \"XRP_USD\": 0.0\r\n  },\r\n  \"totalUsd\": 0.0,\r\n  \"indexedMetrics\": {\r\n    \"totalVolumeUsd\": 0.0,\r\n    \"merchantEarnedUsd\": 0.0,\r\n    \"platformFeeUsd\": 0.0,\r\n    \"customers\": 0,\r\n    \"totalCustomerXp\": 0,\r\n    \"transactionCount\": 0\r\n  }\r\n}",
                      "sample": "{\r\n  \"merchantWallet\": \"string\",\r\n  \"sourceWallet\": \"string\",\r\n  \"splitAddressUsed\": \"string\",\r\n  \"balances\": {\r\n    \"ETH\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"USDT\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbBTC\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    },\r\n    \"cbXRP\": {\r\n      \"units\": 0.0,\r\n      \"usd\": 0.0,\r\n      \"decimals\": 0,\r\n      \"address\": \"string\"\r\n    }\r\n  },\r\n  \"rates\": {\r\n    \"ETH_USD\": 0.0,\r\n    \"BTC_USD\": 0.0,\r\n    \"XRP_USD\": 0.0\r\n  },\r\n  \"totalUsd\": 0.0,\r\n  \"indexedMetrics\": {\r\n    \"totalVolumeUsd\": 0.0,\r\n    \"merchantEarnedUsd\": 0.0,\r\n    \"platformFeeUsd\": 0.0,\r\n    \"customers\": 0,\r\n    \"totalCustomerXp\": 0,\r\n    \"transactionCount\": 0\r\n  }\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReserveBalancesGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "wallet_unset_or_invalid",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getSiteConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getSiteConfig",
            "properties": {
              "displayName": "Get site configuration (branding and defaults)",
              "method": "GET",
              "urlTemplate": "/api/site/config",
              "templateParameters": [],
              "description": "Returns site-level branding and default payment settings used by the portal. May be public/read-only depending on environment; APIM enforcement can be enabled in production. If APIM is enabled, rate limiting headers may be present. Requests may still be required to traverse AFD in protected environments; direct APIM origin may be rejected with 403.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Site configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "theme": {
                              "primaryColor": "#1f2937",
                              "secondaryColor": "#F54029",
                              "brandLogoUrl": "/cblogod.png",
                              "brandFaviconUrl": "/favicon-32x32.png",
                              "brandName": "PortalPay",
                              "fontFamily": "Inter, ui-sans-serif, system-ui",
                              "receiptBackgroundUrl": "/manifest.webmanifest"
                            },
                            "defaultPaymentToken": "ETH",
                            "processingFeePct": 1.0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "SiteConfig",
                      "generatedSample": "{\r\n  \"theme\": {\r\n    \"primaryColor\": \"#1f2937\",\r\n    \"secondaryColor\": \"#F54029\",\r\n    \"brandLogoUrl\": \"/cblogod.png\",\r\n    \"brandFaviconUrl\": \"/favicon-32x32.png\",\r\n    \"brandName\": \"PortalPay\",\r\n    \"fontFamily\": \"Inter, ui-sans-serif, system-ui\",\r\n    \"receiptBackgroundUrl\": \"/manifest.webmanifest\"\r\n  },\r\n  \"defaultPaymentToken\": \"ETH\",\r\n  \"processingFeePct\": 1.0\r\n}",
                      "sample": "{\r\n  \"theme\": {\r\n    \"primaryColor\": \"#1f2937\",\r\n    \"secondaryColor\": \"#F54029\",\r\n    \"brandLogoUrl\": \"/cblogod.png\",\r\n    \"brandFaviconUrl\": \"/favicon-32x32.png\",\r\n    \"brandName\": \"PortalPay\",\r\n    \"fontFamily\": \"Inter, ui-sans-serif, system-ui\",\r\n    \"receiptBackgroundUrl\": \"/manifest.webmanifest\"\r\n  },\r\n  \"defaultPaymentToken\": \"ETH\",\r\n  \"processingFeePct\": 1.0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getSplitConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getSplitConfig",
            "properties": {
              "displayName": "Get split configuration for merchant",
              "method": "GET",
              "urlTemplate": "/api/split/deploy",
              "templateParameters": [],
              "description": "Returns the split configuration saved for the merchant (address and recipients). Requires APIM subscription and `split:read` scope.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Split configuration",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "split": {
                              "address": "string",
                              "recipients": [
                                {
                                  "address": "string",
                                  "sharesBps": 0
                                }
                              ]
                            }
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "SplitConfigResponse",
                      "generatedSample": "{\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  }\r\n}",
                      "sample": "{\r\n  \"split\": {\r\n    \"address\": \"string\",\r\n    \"recipients\": [\r\n      {\r\n        \"address\": \"string\",\r\n        \"sharesBps\": 0\r\n      }\r\n    ]\r\n  }\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getTaxCatalog",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getTaxCatalog",
            "properties": {
              "displayName": "Get tax catalog (illustrative jurisdictions and rates)",
              "method": "GET",
              "urlTemplate": "/api/tax/catalog",
              "templateParameters": [],
              "description": "Returns curated tax jurisdictions with example rates to bootstrap merchant tax settings. For production-grade accuracy, integrate a certified tax provider (TaxJar/Avalara).\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "country",
                    "description": "Filter by country code (e.g., US, CA, UK, EU, AU, SG, JP)",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiTaxCatalogGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Tax catalog response",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "provider": {
                              "name": "string",
                              "apiKeySet": true
                            },
                            "updatedAt": 0,
                            "jurisdictions": [
                              {
                                "code": "string",
                                "name": "string",
                                "rate": 0.0,
                                "country": "string",
                                "type": "string"
                              }
                            ],
                            "disclaimer": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TaxCatalogResponse",
                      "generatedSample": "{\r\n  \"provider\": {\r\n    \"name\": \"string\",\r\n    \"apiKeySet\": true\r\n  },\r\n  \"updatedAt\": 0,\r\n  \"jurisdictions\": [\r\n    {\r\n      \"code\": \"string\",\r\n      \"name\": \"string\",\r\n      \"rate\": 0.0,\r\n      \"country\": \"string\",\r\n      \"type\": \"string\"\r\n    }\r\n  ],\r\n  \"disclaimer\": \"string\"\r\n}",
                      "sample": "{\r\n  \"provider\": {\r\n    \"name\": \"string\",\r\n    \"apiKeySet\": true\r\n  },\r\n  \"updatedAt\": 0,\r\n  \"jurisdictions\": [\r\n    {\r\n      \"code\": \"string\",\r\n      \"name\": \"string\",\r\n      \"rate\": 0.0,\r\n      \"country\": \"string\",\r\n      \"type\": \"string\"\r\n    }\r\n  ],\r\n  \"disclaimer\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiTaxCatalogGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getBillingBalance",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getBillingBalance",
            "properties": {
              "displayName": "Get user balance (time credits)",
              "method": "GET",
              "urlTemplate": "/api/billing/balance",
              "templateParameters": [],
              "description": "Returns remaining time credits for the authenticated wallet (resolved at gateway). May include plan info if subscribed. Requires APIM subscription. Gracefully degrades to zeros if Cosmos is unavailable.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Balance response",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "balanceSeconds": 0,
                            "purchasedSeconds": 0,
                            "usedSeconds": 0,
                            "unlimited": true,
                            "plan": "basic",
                            "planExpiry": 0,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "BalanceResponse",
                      "generatedSample": "{\r\n  \"balanceSeconds\": 0,\r\n  \"purchasedSeconds\": 0,\r\n  \"usedSeconds\": 0,\r\n  \"unlimited\": true,\r\n  \"plan\": \"basic\",\r\n  \"planExpiry\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"balanceSeconds\": 0,\r\n  \"purchasedSeconds\": 0,\r\n  \"usedSeconds\": 0,\r\n  \"unlimited\": true,\r\n  \"plan\": \"basic\",\r\n  \"planExpiry\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    },
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiBillingBalanceGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/healthz",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "healthz",
            "properties": {
              "displayName": "Health check",
              "method": "GET",
              "urlTemplate": "/healthz",
              "templateParameters": [],
              "description": "Returns 200 with a small JSON payload for health probes. Subscription is not required. Accessible via AFD and APIM; used by AFD origin-group HTTPS probe.\n",
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Service is healthy",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "status": "ok"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "HealthzGet200ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"status\": \"ok\"\r\n}",
                      "sample": "{\r\n  \"status\": \"ok\"\r\n}"
                    }
                  ],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/listInventory",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "listInventory",
            "properties": {
              "displayName": "List inventory items",
              "method": "GET",
              "urlTemplate": "/api/inventory",
              "templateParameters": [],
              "description": "List inventory items for the merchant associated with the resolved wallet. Requires APIM subscription and `inventory:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "q",
                    "description": "Search term (name, SKU, description, category, tags)",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest"
                  },
                  {
                    "name": "category",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-1"
                  },
                  {
                    "name": "taxable",
                    "type": "string",
                    "values": [
                      "true",
                      "false",
                      "any"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-2"
                  },
                  {
                    "name": "stock",
                    "type": "string",
                    "values": [
                      "in",
                      "out",
                      "any"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-3"
                  },
                  {
                    "name": "priceMin",
                    "type": "number",
                    "format": "float",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-4"
                  },
                  {
                    "name": "priceMax",
                    "type": "number",
                    "format": "float",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-5"
                  },
                  {
                    "name": "tags",
                    "description": "Comma-separated tags",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-6"
                  },
                  {
                    "name": "tagsMode",
                    "description": "Tag match mode",
                    "type": "string",
                    "values": [
                      "any",
                      "all"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-7"
                  },
                  {
                    "name": "pack",
                    "description": "Industry pack filter",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-8"
                  },
                  {
                    "name": "sort",
                    "type": "string",
                    "defaultValue": "updatedAt",
                    "values": [
                      "name",
                      "sku",
                      "priceUsd",
                      "stockQty",
                      "updatedAt"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-9"
                  },
                  {
                    "name": "order",
                    "type": "string",
                    "defaultValue": "desc",
                    "values": [
                      "asc",
                      "desc"
                    ],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-10"
                  },
                  {
                    "name": "limit",
                    "type": "integer",
                    "format": "int32",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-11"
                  },
                  {
                    "name": "page",
                    "type": "integer",
                    "format": "int32",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiInventoryGetRequest-12"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Inventory list",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "items": [
                              {
                                "id": "string",
                                "wallet": "string",
                                "sku": "string",
                                "name": "string",
                                "priceUsd": 0.0,
                                "currency": "string",
                                "stockQty": 0,
                                "category": "string",
                                "description": "string",
                                "tags": [
                                  "string"
                                ],
                                "images": [
                                  "string"
                                ],
                                "attributes": {},
                                "costUsd": 0.0,
                                "taxable": true,
                                "jurisdictionCode": "string",
                                "industryPack": "string",
                                "createdAt": 0,
                                "updatedAt": 0
                              }
                            ],
                            "total": 0,
                            "page": 0,
                            "pageSize": 0,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "InventoryListResponse",
                      "generatedSample": "{\r\n  \"items\": [\r\n    {\r\n      \"id\": \"string\",\r\n      \"wallet\": \"string\",\r\n      \"sku\": \"string\",\r\n      \"name\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"currency\": \"string\",\r\n      \"stockQty\": 0,\r\n      \"category\": \"string\",\r\n      \"description\": \"string\",\r\n      \"tags\": [\r\n        \"string\"\r\n      ],\r\n      \"images\": [\r\n        \"string\"\r\n      ],\r\n      \"attributes\": {},\r\n      \"costUsd\": 0.0,\r\n      \"taxable\": true,\r\n      \"jurisdictionCode\": \"string\",\r\n      \"industryPack\": \"string\",\r\n      \"createdAt\": 0,\r\n      \"updatedAt\": 0\r\n    }\r\n  ],\r\n  \"total\": 0,\r\n  \"page\": 0,\r\n  \"pageSize\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"items\": [\r\n    {\r\n      \"id\": \"string\",\r\n      \"wallet\": \"string\",\r\n      \"sku\": \"string\",\r\n      \"name\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"currency\": \"string\",\r\n      \"stockQty\": 0,\r\n      \"category\": \"string\",\r\n      \"description\": \"string\",\r\n      \"tags\": [\r\n        \"string\"\r\n      ],\r\n      \"images\": [\r\n        \"string\"\r\n      ],\r\n      \"attributes\": {},\r\n      \"costUsd\": 0.0,\r\n      \"taxable\": true,\r\n      \"jurisdictionCode\": \"string\",\r\n      \"industryPack\": \"string\",\r\n      \"createdAt\": 0,\r\n      \"updatedAt\": 0\r\n    }\r\n  ],\r\n  \"total\": 0,\r\n  \"page\": 0,\r\n  \"pageSize\": 0,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/listReceipts",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "listReceipts",
            "properties": {
              "displayName": "List receipts",
              "method": "GET",
              "urlTemplate": "/api/receipts",
              "templateParameters": [],
              "description": "List recent receipts for the merchant associated with the resolved wallet. Requires APIM subscription and `receipts:read` scope. Gracefully degrades to in-memory when Cosmos is unavailable.\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "limit",
                    "description": "Number of receipts to return (default 100, max 200)",
                    "type": "integer",
                    "format": "int32",
                    "defaultValue": "100",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiReceiptsGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Recent receipts",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "receipts": [
                              {
                                "receiptId": "R-123456",
                                "totalUsd": 13.09,
                                "currency": "USD",
                                "lineItems": [
                                  {
                                    "label": "Espresso",
                                    "priceUsd": 7.0,
                                    "qty": 2
                                  },
                                  {
                                    "label": "Tax",
                                    "priceUsd": 1.09
                                  },
                                  {
                                    "label": "Processing Fee",
                                    "priceUsd": 0.5
                                  }
                                ],
                                "createdAt": 1698765432000,
                                "brandName": "PortalPay",
                                "status": "paid"
                              }
                            ]
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsGet200ApplicationJsonResponse",
                      "generatedSample": "{\r\n  \"receipts\": [\r\n    {\r\n      \"receiptId\": \"R-123456\",\r\n      \"totalUsd\": 13.09,\r\n      \"currency\": \"USD\",\r\n      \"lineItems\": [\r\n        {\r\n          \"label\": \"Espresso\",\r\n          \"priceUsd\": 7.0,\r\n          \"qty\": 2\r\n        },\r\n        {\r\n          \"label\": \"Tax\",\r\n          \"priceUsd\": 1.09\r\n        },\r\n        {\r\n          \"label\": \"Processing Fee\",\r\n          \"priceUsd\": 0.5\r\n        }\r\n      ],\r\n      \"createdAt\": 1698765432000,\r\n      \"brandName\": \"PortalPay\",\r\n      \"status\": \"paid\"\r\n    }\r\n  ]\r\n}",
                      "sample": "{\r\n  \"receipts\": [\r\n    {\r\n      \"receiptId\": \"R-123456\",\r\n      \"totalUsd\": 13.09,\r\n      \"currency\": \"USD\",\r\n      \"lineItems\": [\r\n        {\r\n          \"label\": \"Espresso\",\r\n          \"priceUsd\": 7.0,\r\n          \"qty\": 2\r\n        },\r\n        {\r\n          \"label\": \"Tax\",\r\n          \"priceUsd\": 1.09\r\n        },\r\n        {\r\n          \"label\": \"Processing Fee\",\r\n          \"priceUsd\": 0.5\r\n        }\r\n      ],\r\n      \"createdAt\": 1698765432000,\r\n      \"brandName\": \"PortalPay\",\r\n      \"status\": \"paid\"\r\n    }\r\n  ]\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/listSplitTransactions",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "listSplitTransactions",
            "properties": {
              "displayName": "List split transactions (if configured)",
              "method": "GET",
              "urlTemplate": "/api/split/transactions",
              "templateParameters": [],
              "description": "Returns transactions indexed by the split indexer. Availability varies by deployment. Requires APIM subscription and `split:read` scope. Requests must traverse AFD; direct APIM origin may be rejected with 403 (origin enforcement).\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "address",
                    "description": "Optional filter by recipient/split address",
                    "type": "string",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiSplitTransactionsGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Array of transactions",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": [
                            {
                              "id": "txn_abc",
                              "receiptId": "rcpt_12345",
                              "amount": 27.0,
                              "currency": "USDC",
                              "status": "completed",
                              "timestamp": "2025-01-01T12:00:00Z",
                              "transactionHash": "0x...",
                              "fees": 0.2
                            }
                          ]
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiSplitTransactionsGet200ApplicationJsonResponse",
                      "generatedSample": "[\r\n  {\r\n    \"id\": \"txn_abc\",\r\n    \"receiptId\": \"rcpt_12345\",\r\n    \"amount\": 27.0,\r\n    \"currency\": \"USDC\",\r\n    \"status\": \"completed\",\r\n    \"timestamp\": \"2025-01-01T12:00:00\",\r\n    \"transactionHash\": \"0x...\",\r\n    \"fees\": 0.2\r\n  }\r\n]",
                      "sample": "[\r\n  {\r\n    \"id\": \"txn_abc\",\r\n    \"receiptId\": \"rcpt_12345\",\r\n    \"amount\": 27.0,\r\n    \"currency\": \"USDC\",\r\n    \"status\": \"completed\",\r\n    \"timestamp\": \"2025-01-01T12:00:00\",\r\n    \"transactionHash\": \"0x...\",\r\n    \"fees\": 0.2\r\n  }\r\n]"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postReceiptRefund",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postReceiptRefund",
            "properties": {
              "displayName": "Log a refund for a receipt (merchant/admin via portal)",
              "method": "POST",
              "urlTemplate": "/api/receipts/refund",
              "templateParameters": [],
              "description": "Logs a refund entry for a receipt and updates status history. Requires JWT and CSRF via portal UI. APIM developers typically do not call this directly; included for completeness of public surface.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "receiptId": "string",
                          "wallet": "string",
                          "buyer": "string",
                          "usd": 0.0,
                          "items": [
                            {
                              "label": "string",
                              "priceUsd": 0.0,
                              "qty": 0
                            }
                          ],
                          "txHash": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ReceiptRefundRequest",
                    "generatedSample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"buyer\": \"string\",\r\n  \"usd\": 0.0,\r\n  \"items\": [\r\n    {\r\n      \"label\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"qty\": 0\r\n    }\r\n  ],\r\n  \"txHash\": \"string\"\r\n}",
                    "sample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"buyer\": \"string\",\r\n  \"usd\": 0.0,\r\n  \"items\": [\r\n    {\r\n      \"label\": \"string\",\r\n      \"priceUsd\": 0.0,\r\n      \"qty\": 0\r\n    }\r\n  ],\r\n  \"txHash\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Refund logged",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "OkResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsRefundPost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "missing_receipt_id or invalid_wallet or invalid_buyer or invalid_usd",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/getReserveRecommendation",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "getReserveRecommendation",
            "properties": {
              "displayName": "Recommend settlement token and frequency",
              "method": "GET",
              "urlTemplate": "/api/reserve/recommend",
              "templateParameters": [],
              "description": "Recommends which token to settle with and how frequently based on target reserve ratios vs current balances. Considers optional upcoming receipt amount.\n",
              "request": {
                "queryParameters": [
                  {
                    "name": "receiptUsd",
                    "description": "Optional upcoming payment amount to consider",
                    "type": "number",
                    "format": "float",
                    "values": [],
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ApiReserveRecommendGetRequest"
                  }
                ],
                "headers": [],
                "representations": []
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Recommendation",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "recommendedToken": "USDC",
                            "frequency": 0,
                            "deficitFraction": 0.0,
                            "maxDeficit": 0.0,
                            "totalUsd": 0.0,
                            "futureTotal": 0.0,
                            "targets": {},
                            "currentUsd": {},
                            "deficits": {}
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ReserveRecommendationResponse",
                      "generatedSample": "{\r\n  \"recommendedToken\": \"USDC\",\r\n  \"frequency\": 0,\r\n  \"deficitFraction\": 0.0,\r\n  \"maxDeficit\": 0.0,\r\n  \"totalUsd\": 0.0,\r\n  \"futureTotal\": 0.0,\r\n  \"targets\": {},\r\n  \"currentUsd\": {},\r\n  \"deficits\": {}\r\n}",
                      "sample": "{\r\n  \"recommendedToken\": \"USDC\",\r\n  \"frequency\": 0,\r\n  \"deficitFraction\": 0.0,\r\n  \"maxDeficit\": 0.0,\r\n  \"totalUsd\": 0.0,\r\n  \"futureTotal\": 0.0,\r\n  \"targets\": {},\r\n  \"currentUsd\": {},\r\n  \"deficits\": {}\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReserveRecommendGet200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "recommendation_failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postBillingPurchase",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postBillingPurchase",
            "properties": {
              "displayName": "Record a purchase/payment event",
              "method": "POST",
              "urlTemplate": "/api/billing/purchase",
              "templateParameters": [],
              "description": "Records a purchase tied to a merchant recipient and updates receipt status lifecycle. Validates optional on-chain transaction recipient. Triggers split indexing when applicable. Requires APIM subscription. Wallet is resolved via gateway/JWT or provided header/body in non-prod.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "wallet": "string",
                          "seconds": 0,
                          "usd": 0.0,
                          "eth": 0.0,
                          "txHash": "string",
                          "idempotencyKey": "string",
                          "recipient": "string",
                          "receiptId": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "BillingPurchaseRequest",
                    "generatedSample": "{\r\n  \"wallet\": \"string\",\r\n  \"seconds\": 0,\r\n  \"usd\": 0.0,\r\n  \"eth\": 0.0,\r\n  \"txHash\": \"string\",\r\n  \"idempotencyKey\": \"string\",\r\n  \"recipient\": \"string\",\r\n  \"receiptId\": \"string\"\r\n}",
                    "sample": "{\r\n  \"wallet\": \"string\",\r\n  \"seconds\": 0,\r\n  \"usd\": 0.0,\r\n  \"eth\": 0.0,\r\n  \"txHash\": \"string\",\r\n  \"idempotencyKey\": \"string\",\r\n  \"recipient\": \"string\",\r\n  \"receiptId\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Purchase recorded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "event": {
                              "id": "string",
                              "type": "purchase",
                              "wallet": "string",
                              "seconds": 0,
                              "usd": 0.0,
                              "eth": 0.0,
                              "txHash": "string",
                              "recipient": "string",
                              "receiptId": "string",
                              "portalFeePct": 0.0,
                              "portalFeeRecipient": "string",
                              "portalFeeUsd": 0.0,
                              "ts": 0
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "BillingPurchaseResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"event\": {\r\n    \"id\": \"string\",\r\n    \"type\": \"purchase\",\r\n    \"wallet\": \"string\",\r\n    \"seconds\": 0,\r\n    \"usd\": 0.0,\r\n    \"eth\": 0.0,\r\n    \"txHash\": \"string\",\r\n    \"recipient\": \"string\",\r\n    \"receiptId\": \"string\",\r\n    \"portalFeePct\": 0.0,\r\n    \"portalFeeRecipient\": \"string\",\r\n    \"portalFeeUsd\": 0.0,\r\n    \"ts\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"event\": {\r\n    \"id\": \"string\",\r\n    \"type\": \"purchase\",\r\n    \"wallet\": \"string\",\r\n    \"seconds\": 0,\r\n    \"usd\": 0.0,\r\n    \"eth\": 0.0,\r\n    \"txHash\": \"string\",\r\n    \"recipient\": \"string\",\r\n    \"receiptId\": \"string\",\r\n    \"portalFeePct\": 0.0,\r\n    \"portalFeeRecipient\": \"string\",\r\n    \"portalFeeUsd\": 0.0,\r\n    \"ts\": 0\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    },
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiBillingPurchasePost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "invalid wallet or invalid seconds or merchant_required or tx_mismatch",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 401,
                  "description": "Missing or invalid subscription key",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "unauthorized",
                            "message": "Missing or invalid subscription key"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "UnauthorizedErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}",
                      "sample": "{\r\n  \"error\": \"unauthorized\",\r\n  \"message\": \"Missing or invalid subscription key\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "Server error",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/upsertPricingConfig",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "upsertPricingConfig",
            "properties": {
              "displayName": "Update pricing configuration (owner-only JWT; APIM writes not permitted)",
              "method": "POST",
              "urlTemplate": "/api/pricing/config",
              "templateParameters": [],
              "description": "Updates pricing configuration. Admin-only via JWT and CSRF; APIM dev subscriptions cannot write. Included for completeness; not accessible via public developer subscription.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "ethPer2Min": 0.0,
                          "minMinutes": 0,
                          "discountRules": [
                            {
                              "minMinutes": 0,
                              "discountPct": 0.0
                            }
                          ]
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "PricingConfigUpsertRequest",
                    "generatedSample": "{\r\n  \"ethPer2Min\": 0.0,\r\n  \"minMinutes\": 0,\r\n  \"discountRules\": [\r\n    {\r\n      \"minMinutes\": 0,\r\n      \"discountPct\": 0.0\r\n    }\r\n  ]\r\n}",
                    "sample": "{\r\n  \"ethPer2Min\": 0.0,\r\n  \"minMinutes\": 0,\r\n  \"discountRules\": [\r\n    {\r\n      \"minMinutes\": 0,\r\n      \"discountPct\": 0.0\r\n    }\r\n  ]\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Updated pricing configuration (or degraded fallback)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "config": {
                              "ethPer2Min": 0.0,
                              "minMinutes": 0,
                              "discountRules": [
                                {
                                  "minMinutes": 0,
                                  "discountPct": 0.0
                                }
                              ]
                            },
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "PricingConfigUpsertResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"config\": {\r\n    \"ethPer2Min\": 0.0,\r\n    \"minMinutes\": 0,\r\n    \"discountRules\": [\r\n      {\r\n        \"minMinutes\": 0,\r\n        \"discountPct\": 0.0\r\n      }\r\n    ]\r\n  },\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 400,
                  "description": "invalid_rate",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          },
          {
            "id": "/subscriptions/0a8c8695-c09e-45cc-8a64-697faedee923/resourceGroups/rg-portalpay-prod/providers/Microsoft.ApiManagement/service/apim-portalpay-prod/apis/portalpay-api/operations/postReceiptStatus",
            "type": "Microsoft.ApiManagement/service/apis/operations",
            "name": "postReceiptStatus",
            "properties": {
              "displayName": "Update receipt status (tracking and sensitive events)",
              "method": "POST",
              "urlTemplate": "/api/receipts/status",
              "templateParameters": [],
              "description": "Updates receipt status timeline. Certain tracking statuses may be allowed without JWT (e.g. link_opened, buyer_logged_in, checkout_initialized). Sensitive updates (e.g. checkout_success, refund_*) require JWT and CSRF via the portal UI; APIM developer subscriptions typically use tracking statuses.\n",
              "request": {
                "queryParameters": [],
                "headers": [],
                "representations": [
                  {
                    "contentType": "application/json",
                    "examples": {
                      "default": {
                        "value": {
                          "receiptId": "string",
                          "wallet": "string",
                          "status": "string"
                        }
                      }
                    },
                    "schemaId": "6902f7d667ce42094c8688d9",
                    "typeName": "ReceiptStatusUpdateRequest",
                    "generatedSample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"status\": \"string\"\r\n}",
                    "sample": "{\r\n  \"receiptId\": \"string\",\r\n  \"wallet\": \"string\",\r\n  \"status\": \"string\"\r\n}"
                  }
                ]
              },
              "responses": [
                {
                  "statusCode": 200,
                  "description": "Status update result",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "ok": true,
                            "degraded": true,
                            "reason": "string"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "OkResponse",
                      "generatedSample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}",
                      "sample": "{\r\n  \"ok\": true,\r\n  \"degraded\": true,\r\n  \"reason\": \"string\"\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "x-correlation-id",
                      "description": "Correlation ID for tracing",
                      "type": "string",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ApiReceiptsStatusPost200x-correlation-idResponseHeader"
                    }
                  ]
                },
                {
                  "statusCode": 400,
                  "description": "missing_receipt_id or invalid_wallet or missing_status",
                  "representations": [],
                  "headers": []
                },
                {
                  "statusCode": 403,
                  "description": "Valid key but insufficient scope or disallowed action; or origin enforcement failed (AFD required)",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "forbidden",
                            "message": "Insufficient scope or origin enforcement failed"
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "ForbiddenErrorResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}",
                      "sample": "{\r\n  \"error\": \"forbidden\",\r\n  \"message\": \"Insufficient scope or origin enforcement failed\"\r\n}"
                    }
                  ],
                  "headers": []
                },
                {
                  "statusCode": 429,
                  "description": "Rate limit exceeded",
                  "representations": [
                    {
                      "contentType": "application/json",
                      "examples": {
                        "default": {
                          "value": {
                            "error": "rate_limited",
                            "resetAt": 0
                          }
                        }
                      },
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "TooManyRequestsResponse-json",
                      "generatedSample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}",
                      "sample": "{\r\n  \"error\": \"rate_limited\",\r\n  \"resetAt\": 0\r\n}"
                    }
                  ],
                  "headers": [
                    {
                      "name": "X-RateLimit-Limit",
                      "description": "Maximum number of requests allowed in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Limit"
                    },
                    {
                      "name": "X-RateLimit-Remaining",
                      "description": "Number of requests remaining in the current window",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Remaining"
                    },
                    {
                      "name": "X-RateLimit-Reset",
                      "description": "Unix ms timestamp when the rate limit window resets",
                      "type": "integer",
                      "values": [],
                      "schemaId": "6902f7d667ce42094c8688d9",
                      "typeName": "Header-X-RateLimit-Reset"
                    }
                  ]
                },
                {
                  "statusCode": 500,
                  "description": "failed",
                  "representations": [],
                  "headers": []
                }
              ],
              "policies": null
            }
          }
        ]
      }
    }
  }
}